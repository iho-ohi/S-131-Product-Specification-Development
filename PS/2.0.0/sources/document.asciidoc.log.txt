= IHO Marine Harbour Infrastructure (MHI) Product Specification
series: S
:docnumber: 131
:doctype: standard
:edition: 1.0.0
:language: en
:published-date: 2022-12-31
:copyright-year: 2022
:committee: ircc
:workgroup: ibsc
:mn-document-class: iho
:mn-output-extensions: xml,html,doc,pdf,rxl
:local-cache-only:
:data-uri-image:
:imagesdir: images


[.preface]
== Document History

Changes to this Specification are coordinated by the Nautical Information
Provision Working Group, an IHO working group under HSSC. New editions
will be made available via the IHO web site. Maintenance of the Specification
shall conform to IHO Resolution 2/2007 (as amended).

[cols="69,99,71,345",options="unnumbered"]
|===
h| Version Number h| Date h| Approved By h| Purpose

| 1.0.0 | 2022-08-18 | | Draft 1
| 1.0.0 | 2022-08-22 | | Revised Draft 1
| 1.0.0 | 2022-11-25 | RM
| Daft 2. Applied feedback from NIPWG after NIPWG9; added guidelines
for portrayal of schedules and applicability; miscellaneous editorial
revisions.
| 1.0.0 | 2023-01-10 | RM
| Added HarbourFacility to Figure 4.14; clarifications for ISO metadata
and file naming; version date updated to sync. with other artefacts.

| | | |
| | | |
| | | |
| | | |
| | | |
| | | |
| | | |
|===


[[sec_1]]
== Overview

[[sec_1.1]]
=== Introduction

S-131 is the Marine Harbour Infrastructure (MHI) Product Specification,
produced by the International Hydrographic Organization. S-131 is
designed to allow content, content definition (Feature Catalogues)
and presentation (Portrayal Catalogues) to be updateable without breaking
system implementations.

This document has been produced by the IHO Nautical Information Provision
Working Group (NIPWG) in response to a requirement to produce a data
product that can be used as a Nautical Publication Information Overlay
(NPIO) within an Electronic Chart Display and Information Systems
(ECDIS). It is based on the IHO S-100 framework specification and
the ISO 19100 series of standards. It is a vector product specification
that is intended for encoding information relating to port and harbour
facilities for facilitating berth-to-berth navigation.

Marine Harbour Infrastructure (MHI) datasets describe the layout of
ports and the availability of port services. This includes facility
locations, service areas, services offered, and instructions for contacting
or utilizing these services. MHI is intended to be a supplement to
ENC, and therefore does not describe the geographic information in
detail equal to ENC.

[[sec_1.2]]
=== Scope

This document describes an S-100 compliant Product Specification for
Marine Harbour Infrastructure, which will form an overlay layer for
an S-100 based marine navigation system. It specifies the content,
structure, and metadata needed for creating a fully compliant S-131
product and for its portrayal within an S-100 system. This Product
Specification includes the content model, the encoding, the Feature
Catalogue, Portrayal Catalogue, and metadata.

[[sec_1.3]]
=== References

[[sec_1.3.1]]
[bibliography]
==== Normative

* [[[ISO_639_2_T,ISO 639-2]]] _Codes for the representation of names of languages -- Part 2: Alpha-3 code_

* [[[ISO_3166_1,ISO 3166-1]]] _Codes for the Representation of Names of Countries and their Subdivisions -- Part 1:_ _Country Codes_

* [[[IHO_M_3,IHO M-3]]] Resolutions of the International Hydrographic Organization, IHO Publication M-3, 2nd Edition, 2010 (updated April 2022).

* [[[IHO_S_62,IHO S-62]]] List of Data Producer Codes (online), URL: link:++http://registry.iho.int/producercode/list.do++[]

* [[[IHO_S_97,IHO S-97]]] IHO Guidelines for Creating S-100 Product Specifications, Edition 1.1.0, June 2020.

* [[[IHO_S_98,IHO S-98]]] Data Product Interoperability in S-100 Navigation Systems, Edition 1.0.0, May 2022

* [[[IHO_S_100,IHO S-100]]] IHO Universal Hydrographic Data Model, Edition 5.0.0, December 2022.

[[sec_1.3.2]]
[bibliography]
==== Informative

* [[[NIST_FIPS_186,NIST FIPS 186]]] _Federal Information Processing Standards -- Digital Signature Standard_

* [[[IALA_G1143,IALA G1143]]] _Unique Identifiers for Maritime Resources_, Edition 3.0. International Association of Marine Aids to Navigation and Lighthouse Authorities, June 2021.

* [[[ISO_8601_2004,ISO 8601:2004]]] _Data Elements and Interchange Formats -- Information Interchange -- Representation of Dates and Times_

* [[[ISO_19101_2003,ISO 19101:2003]]] _Geographic Information -- Reference Model_

* [[[ISO_19103_2005,ISO 19103:2005]]] _Geographic Information -- Conceptual Schema Language_

* [[[ISO_19103_2_2005,ISO 19103-2:2005]]] _Geographic Information -- Conceptual Schema Language -- Part 2_

* [[[ISO_19108_2002,ISO 19108:2002]]] _Geographic Information -- Temporal Schema_

* [[[ISO_19109_2005,ISO 19109:2005]]] _Geographic Information -- Rules for Application Schema_

* [[[ISO_19110_2005,ISO 19110:2005]]] _Geographic Information -- Methodology for Feature Cataloguing_

* [[[ISO_19111_2007,ISO 19111:2007]]] _Geographic Information -- Spatial Referencing by Coordinates_

* [[[ISO_19115_1,ISO 19115-1]]] _Geographic information -- Metadata -- Part 1 - Fundamentals_. As amended by Amendment 01 (2018)

* [[[ISO_TS_19115_3,ISO/TS 19115-3]]] _Geographic information - Metadata - XML schema implementation for fundamental concepts_

* [[[ISO_19117_2012,ISO 19117:2012]]] _Geographic Information -- Portrayal_

* [[[ISO_19131_2008,ISO 19131:2008]]] _Geographic Information -- Data Product Specifications_

* [[[ISO_19157_2013,ISO 19157:2013]]] _Geographic Information -- Data Quality_

* [[[ISO_IEC_19501_2005,ISO/IEC 19501:2005]]] _Information Technology -- Unified Modelling Language (UML)_, Version 1.4.2

* [[[ISO_IEC_19757_3,ISO/IEC 19757-3]]] Information technology -- Document Schema Definition Languages (DSDL) -- Part 3: Rule-based validation -- Schematron.

* [[[IHO_S_44,IHO S-44]]] IHO Standards for Hydrographic Surveys, Edition 6.0.0, September 2020.

* [[[IHO_S_58,IHO S-58]]] ENC Validation Checks, Edition 7.0.0, October 2022.

* [[[IHO_S_101,IHO S-101]]] IHO Electronic Navigational Chart Product Specification Edition 1.1.0 (under development).

* [[[ITPCO,ITPCO]]] Port Information Manual for Nautical Data of BIMCO, IAPH, IHMA, IHO, ITPCO

* [[[ISO_10646_1,hidden(ISO 10646-1)]]]

[[sec_1.4]]
=== Terms, definitions and abbreviations

[[sec_1.4.1]]
==== Use of language

Within this document:

* "Must" indicates a mandatory requirement.

* "Should" indicates an optional requirement, that is the recommended
process to be followed, but is not mandatory.

* "May" means "allowed to" or "could possibly", and is not mandatory.

[[sec_1.4.2]]
[heading="terms and definitions"]
==== Terms and definitions

===== accuracy

Closeness of agreement between a test result and the accepted reference
values.

NOTE: A test result can be from an observation or measurement.

===== aggregation

Special form of {{association}} that specifies a whole-part relationship
between the aggregate (whole) and a component part.

===== alarm

(MSC.302/A) a high-priority {{alert}}. Condition requiring immediate
attention and action by the bridge team, to maintain the safe navigation
of the ship.

===== alert

(MSC.302/A) announcement of abnormal situations and conditions requiring
attention. Alerts are divided in four priorities: **emergency alarm**s,
{{alarm,alarms}}, {{warning,warnings}} and {{caution,cautions}}.
An alert provides information about a defined state change in connection
with information about how to announce this event in a defined way
to the system and the operator.

===== application schema

Conceptual schema for data required by one or more applications.

===== association

Semantic relationship between two or more classifiers that specifies
connections among their instances.

===== attribute

(1) Named property of an entity.

NOTE: Describes a geometrical, topological, thematic, or other characteristic
of an entity.

(2) Feature within a classifier that describes a range of values that
instances of the classifier may hold.

NOTE: An attribute is semantically equivalent to a composition association;
however, the intent and usage is normally different.

NOTE: "Feature" used in this definition is the UML meaning of the
term.

===== boundary

Set that represents the limit of an entity.

NOTE: Boundary is most commonly used in the context of geometry, where
the set is a collection of points or a collection of objects that
represent those points.

===== caution

(MSC.302/A) lowest priority of an {{alert}}. Awareness of a condition
which does not warrant an {{alarm}} or warning condition, but still
requires attention out of the ordinary consideration of the situation
or of given information.

===== class

Description of a set of objects that share the same {{attribute,attributes}},
operations, methods, {{relationship,relationships}}, and semantics.

NOTE: A class represents a concept within the system being modelled.
Depending on the kind of model, the concept may be real-world (for
an analysis model), or it may also contain algorithmic and computer
implementation concepts (for a design model). A classifier is a generalization
of class that includes other class-like elements, such as data type,
actor and component.

===== classification

The process of determining the appropriate {{data type}} within a
{{feature catalogue}} for a particular real world feature, including
consideration of {{data quality}}.

===== coordinate

One of a sequence of n numbers designating the position of a {{point}}
in n-dimensional space.

NOTE: In a {{coordinate reference system}}, the coordinate numbers
are qualified by units.

===== coordinate reference system

{{coordinate,Coordinate}} system that is related to an object by a
datum.

NOTE: For geodetic and vertical datums, the object will be the Earth.

===== coordinate tuple

Ordered list of {{coordinate,coordinates}}.

===== curve

1-dimensional {{geometric primitive}}, representing the continuous
image of a line.

NOTE: The boundary of a curve is the set of points at either end of
the curve. If the curve is a cycle, the two ends are identical, and
the curve (if topologically closed) is considered to not have a boundary.
The first point is called the start point, and the last is the end
point. Connectivity of the curve is guaranteed by the
"continuous image of a line" clause. A topological theorem states
that a continuous image of a connected set is connected.

===== curve segment

1-dimensional geometric object used to represent a continuous component
of a {{curve}} using homogeneous interpolation and definition methods.

NOTE: The geometric set represented by a single curve segment is equivalent
to a curve.

===== data product

A {{dataset}} or dataset series that conforms to a data product specification.

===== data quality

A set of elements describing aspects of quality, including a measure
of quality, an evaluation procedure, a quality result, and a scope.

===== data type

Specification of a value domain with operations allowed on values
in this domain.

NOTE: Data types include primitive predefined types and user-definable
types.

NOTE: A data type is identified by a term, for example Integer.

[example]
Integer, Real, Boolean, String, DirectPosition and Date

===== dataset

An identifiable collection of data.

NOTE: A dataset may be a smaller grouping of data which, though limited
by some constraint such as spatial extent or feature type,is located
physically within a larger dataset. Theoretically, a dataset may be
as small as a single feature contained within a larger dataset.
A hardcopy map or chart may be considered a dataset.

===== datum

Parameter or set of parameters that define the position of the origin,
the scale, and the orientation of a {{coordinate}} system.

===== display priority

Hierarchy to determine which {{feature}} is to be displayed when two
features overlap. Priority 2 overwrites 1.

===== ecdis

A navigation information system which with adequate back-up arrangements
can be accepted as complying with the up-to-date chart required by
regulations V/19 and V/27 of the 1974 SOLAS Convention, as amended,
by displaying selected information from a System Electronic Navigational
Chart (SENC) with positional information from navigation sensors to
assist the Mariner in route planning and route monitoring, and if
required display additional navigation-related information.

===== enc

The {{dataset}}, standardized as to content, structure and format,
issued for use with {{ECDIS}} by or on the authority of a Government
authorized Hydrographic Office or other relevant government institution,
and conforming to IHO standards. The ENC contains all the chart information
necessary for safe navigation and may contain supplementary information
in addition to that contained in the paper chart which may be considered
necessary for safe navigation.

===== enumeration

A fixed list of valid identifiers of named literal values.
{{attribute,Attributes}} of an enumerated type may only take values
from this list.

===== feature

Abstraction of real world phenomena.

NOTE: A feature may occur as a type or an instance. Feature type or
feature instance should be used when only one is meant.

[example]
The phenomenon named 'London Eye' may be classified as a feature instance
with other phenomena into a feature type 'landmark'

===== feature association

{{relationship,Relationship}} that links instances of one {{feature}}
type with instances of the same or a different {{feature}} type.

===== feature attribute

Characteristic of a {{feature}}.

NOTE: A feature {{attribute}} may occur as a type or an instance.
Feature attribute type or feature attribute instance is used when
only one is meant.

NOTE: A feature {{attribute}} type has a name, a {{data type}} and
a domain associated to it. A feature {{attribute}} instance has an
attribute value taken from the value domain of the feature {{attribute}}
type.

NOTE: In a {{feature catalogue}}, a feature {{attribute}} may include
a value domain but does not specify {{attribute}} values for feature
instances.

[example]
A feature attribute named _communication channel_ may have an attribute
value _VHF0007_ which belongs to the data type _text_

[example]
A feature attribute named _length_ may have an attribute value _82.4_
which belongs to the data type _real_

===== feature catalogue

A catalogue containing definitions and descriptions of the {{feature}}
types, {{feature attribute,feature attributes}}, and {{feature association,feature associations}} occurring in one or more sets of geographic data.

===== geometric primitive

Geometric object representing a single, connected, homogeneous element
of geometry.

NOTE: Geometric primitives are non-decomposed objects that present
information about geometric configuration. They include points, curves,
surfaces, and solids.

===== human readable

A representation of information that can be naturally read by humans.

===== identifier

A linguistically independent sequence of characters capable of uniquely
and permanently identifying that with which it is associated.

===== indication

Visual indication giving information about the condition of a system
or equipment.

===== instance

Entity to which a set of operations can be applied and which has a
state that stores the effects of the operations.

NOTE: See {{feature}}.

===== loxodrome

A loxodrome is a line crossing all meridians at the same angle, that
is, a path of constant bearing.

===== machine readable

A representation of information that can be processed by computers.

===== maximum display scale

The larger value of the ratio of the linear dimensions of features
of a dataset presented in the display and the actual dimensions of
the features represented (largest scale) of the scale range of the
dataset.

===== metadata

Data about data.

===== minimum display scale

The smaller value of the ratio of the linear dimensions of features
of a dataset presented in the display and the actual dimensions of
the features represented (smallest scale) of the scale range of the
dataset.

===== model

Abstraction of some aspects of universe of discourse.

NOTE: A semantically complete abstraction of a system.

===== multiplicity

Specification of the number of possible occurrences of a property,
or the number of allowable elements that may participate in a given
relationship.

[example]
1..++*++ (one to many); 1 (exactly one); 0..1 (zero or one)

===== overscale

The viewing scale is larger than the value considered by the data
producer to be the largest intended (maximum) display scale for the
data.

===== point

0-dimensional {{geometric primitive}}, representing a position.

NOTE: The {{boundary}} of a point is the empty set.

===== portrayal catalogue

Collection of defined portrayals for a {{feature catalogue}}.

NOTE: Content of a portrayal catalogue includes portrayal functions,
symbols, and portrayal context.

===== relationship

Semantic connection among model elements.

NOTE: Kinds of relationships include association, generalization,
metarelationship, flow, and several kinds grouped under dependency.

===== scale minimum

The smallest scale at which a feature is displayed (for example, a
minor light, with a scale minimum of 1:45,000, would not be displayed
at a scale of 1:90,000).

===== surface

Connected 2-dimensional {{geometric primitive}}, representing the
continuous image of a region of a plane.

NOTE: The boundary of a surface is the set of oriented, closed {{curve,curves}}
that delineate the limits of the surface.

===== symbol size

The size is specified in normalized units of 0.01 mm. The minimum
dimension is always more than 4 mm. This size applies to display on
a standard minimum screen.

===== text label

A textual description of a {{feature}}. Can be formatted to include
standard text as well as {{feature attribute}} values. For example,
light descriptions, place names etc.

===== transparent fill

A method of identifying features of *geometric primitive surface*
by covering a given percentage of each 4 pixel square with the fill
colour, leaving the remainder "transparent". Used to ensure the information
underneath shows through.

===== vertical datum

Datum describing the relation of gravity-related heights or depths
to the Earth.

===== warning

(MSC.302/A) {{alert}} for condition requiring immediate attention,
but no immediate action by the bridge team. Warnings are presented
for precautionary reasons to make the bridge team aware of changed
conditions which are not immediately hazardous, but may become so
if no action is taken.

[[sec_1.4.3]]
==== Abbreviations

This product specification adopts the following convention for symbols
and abbreviated terms.

CRS:: Coordinate Reference System

DCEG:: Data Classification and Encoding Guide

ECDIS:: Electronic Chart Display and Information System

ENC:: Electronic Navigational Chart

EPSG:: European Petroleum Survey Group

GFM:: General Feature Model

GML:: Geography Markup Language

IEC:: International Electrotechnical Commission

IHO:: International Hydrographic Organization

IMO:: International Maritime Organization

ISO:: International Organization for Standardization

JPEG:: Joint Photographic Experts Group

MRN:: Maritime Resource Name

MSVS:: Mariners Selected Viewing Scale

MHI:: Marine Harbour Infrastructure

NIPWG:: Nautical Information Provision Working Group

PNG:: Portable Network Graphics

SD:: System Database

SENC:: System Electronic Navigational Chart

SOLAS:: Safety of Life at Sea

SVG:: Scalable Vector Graphics

S-100WG:: IHO S-100 Working Group

TIFF:: Tagged Image File Format

UML:: Unified Modelling Language

URI:: Uniform Resource Identifier

URL:: Uniform Resource Locator

URN:: Uniform Resource Name

UTC:: Coordinated Universal Time

XML:: eXtensible Markup Language

XSD:: XML Schema Definition

XSLT:: eXtensible Stylesheet Language Transformations

[[sec_1.5]]
=== General data product description

NOTE: This information contains general information about the data
product.

*Title:*:: Marine Harbour Infrastructure

*Abstract:*:: Marine Harbour Infrastructure (MHI) datasets describe
the layout of port facilities and the availability of port services.
MHI is intended to facilitate berth-to-berth navigation and voyage
planning. MHI is intended to be a supplement to ENC, and therefore
does not describe the geographic information in detail equal to an
ENC.

*Content:*:: Datasets conforming to this specification will contain
all relevant MHI information for the area of coverage. Additionally,
there will be relevant metadata data quality, production authority,
data sources, and publication date.

*Spatial Extent:*::

*Description:*:: Global coverage of port and harbours and their environs.

*East Bounding Longitude:*:: 180°

*West Bounding Longitude:*:: -180°

*North Bounding Latitude:*:: 90°

*South Bounding Latitude:*:: -90°

*Purpose:*:: The purpose of an MHI dataset is to provide information
to mariners for use in berth-to-berth navigation and voyage planning.

[[sec_1.6]]
=== Data Product Specification metadata

NOTE: The information in this clause identifies this Product Specification
and provides information about its creation and maintenance. Dataset
metadata is described in a separate clause.

*Title:*:: The International Hydrographic Organization Electronic
Navigational Chart Product Specification

*S-100 Version:*:: 5.0.0

*S-131 Version:*:: 1.0.0

*Date:*:: December 2022

*Language:*:: English

*Classification:*:: Unclassified

*Contact:*::
+
--
International Hydrographic Organization +
4b Quai Antoine 1er +
B.P. 445 +
MC 98011 MONACO CEDEX +
Telephone: +377 93 10 81 00 +
Fax: + 377 93 10 81 40 +
Email: mailto:++info@iho.int++[info@iho.int]
--

*URL:*:: link:++http://www.iho.int/++[www.iho.int]

*Identifier:*:: S-131

*Maintenance:*:: Changes to the Product Specification S-131 are coordinated
by the Nautical Information Provision Working Group, a technical group
established by the International Hydrographic Organization, and are
made available via the IHO web site. Maintenance of the Product Specification
must conform to IHO Resolution 2/2007, as amended.

[[sec_1.7]]
=== IHO Product Specification maintenance

[[sec_1.7.1]]
==== Introduction

Changes to S-131 will be released by the IHO as a New Edition, revision,
or clarification.

[[sec_1.7.2]]
==== New Edition

_New Editions_ of S-131 introduce significant changes. _New Editions_
enable new concepts, such as the ability to support new functions
or applications, or the introduction of new constructs or data types.
_New Editions_ are likely to have a significant impact on either existing
users or future users of S-131. All cumulative _revisions_ and _clarifications_
must be included with the release of approved New Editions.

[[sec_1.7.3]]
==== Revision

_Revisions_ are defined as substantive semantic changes to S-131.
Typically, _revisions_ will change S-131 to correct factual errors;
or introduce necessary changes that have become evident as a result
of practical experience or changing circumstances. A _revision_ must
not be classified as a clarification. _Revisions_ could have an impact
on either existing users or future users of S-131. All cumulative
_clarifications_ must be included with the release of approved corrections
revisions.

Changes in a _revision_ are minor and ensure backward compatibility
with the previous versions within the same Edition. Newer revisions,
for example, introduce new features and attributes. Within the same
Edition, a dataset of one version could always be processed with a
later version of the Feature and Portrayal Catalogues.

In most cases a new Feature Catalogue will result in a _revision_
of S-131.

[[sec_1.7.4]]
==== Clarification

_Clarifications_ are defined as non-substantive changes. Typically,
_clarifications_: remove ambiguity; correct grammatical and spelling
errors; amend or update cross references; and insert improved graphics.
A _clarification_ must not cause any substantive semantic change to
a data product.

Changes in a _clarification_ are minor and ensure backward compatibility
with the previous versions.

[[sec_1.7.5]]
==== Version numbers

The associated version control numbering to identify changes (n) to
this Product Specification must be as follows:

New Editions denoted as *n*.0.0

Revisions denoted as n.*n*.0

Clarifications denoted as n.n.*n*


[[sec_2]]
== Specification Scope

*Scope ID:*:: Global

*Level:*:: 006 - series

*Level name:*:: MHI Dataset


[[sec_3]]
== Dataset Identification

A dataset that conforms to this Product Specification may be identified
by its discovery metadata as defined in <<sec_14>>.

*Title:*:: Marine Harbour Infrastructure

*Alternate Title:*:: MHI

*Abstract:*:: S-131 datasets must be produced in accordance with the
rules defined in the S-131 Product Specification. The S-131 Product
Specification contains all the information necessary to enable producers
to produce a consistent MHI dataset; and manufacturers to use that
data efficiently within navigation systems.

*Topic Category:*:: Transportation (<<ISO_19115_1>> MD_TopicCategoryCode
018)

*Geographic Description:*:: Ports and harbours in areas specific to
marine navigation

*Spatial Resolution:*:: An MHI dataset must indicate a value for maximum
display scale. Each *Data Coverage* feature must also carry a value
for minimum display scale. Recommended values for scales can be found
in the S-101 ENC Product Specification. Producers should note that
at the smaller scales, geographic details within ports will have no
perceptible visual separation on a graphic display, and are therefore
encouraged to determine display scales taking into account the content
and intended navigation purpose of the dataset.

*Purpose:*::  Information about ports and harbours for use in Electronic
Chart Display and Information Systems

*Language:*:: English (Mandatory), other (Optional)

*Classification:*:: Data may be classified as one of the following:
+
--
. Unclassified;
. Restricted;
. Confidential;
. Secret;
. Top Secret;
. Sensitive but Unclassified;
. For Official Use Only;
. Protected; or
. Limited Distribution.
--

*Spatial Representation Type:*:: Vector

*Point of Contact:*:: Producing Agency

*Use Limitation:*:: Not for sole use in navigation; must be used with
an ENC.


[[sec_4]]
== Data Content and Structure

[[sec_4.1]]
=== Introduction

The S-131 product is based on the S-100 General Feature Model (GFM),
and is a feature-based vector product. <<fig_4.1>> shows how the S-131
application schema is realized from the S-100 GFM. All S-131 features
and information classes are derived from one of the abstract classes
*FeatureType* and *InformationType* defined in the S-131 application
schema, which realize the GFM meta-classes S100_GF_FeatureType and
S100_GF_InformationType respectively.

[[fig_4.1]]
.Realizations from the S-100 General Feature Model
image::figure-1.png[]

[[sec_4.2]]
=== Application Schema

S-131 conforms to the General Feature Model (GFM) from S-100
Part 3. This document describes the Application Schema expressed in
UML. This document contains only an overview of the S-131 application
schema. The S-131 Application Schema types are realised in the Feature
Catalogue. The Feature Catalogue is included as a separate Annex
(Annex C), and provides a full specification of all types including
feature and information types, their attributes, allowed values, and
relationships between types in the data product.

The following conventions are used in the UML diagrams depicting the
application schema:

* Standard UML conventions for classes, associations, inheritance,
roles, and multiplicities apply. These conventions are described in
Part 1 of S-100.
* Italic font for a class name indicates an abstract class.
* Feature classes are depicted with green background; the dark shade
for abstract feature classes and the light shade for ordinary (non-abstract)
feature classes.
* Information type classes are depicted with blue background; the
dark shade for abstract information type classes and the light shade
for ordinary information types.
* Association classes are depicted with a white background.
* Complex attributes are depicted with a pink background.
* Enumeration lists and codelists are depicted with a tan background.
The numeric code corresponding to each listed value is shown to its
right following an '=' sign.
* No significance attaches to the colour of associations.
(Complex diagrams may use different colours to distinguish associations
that cross one another.)
* Where the association role or name is not explicitly shown, the
default rules for roles and names apply:

** The role name is 'the<CLASSNAME>' where <CLASSNAME> is the name
of the class to which that association end is linked.
** The association name is '<CLASSNAME1>_<CLASSNAME2>' where <CLASSNAME1>
is the source and <CLASSNAME2> the target. In case of a feature/information
association the feature is the source. For feature/feature or
information/information associations without explicit names the source/target
are indicated by an arrowhead.
* Subclasses inherit the attributes and associations of their superclasses
at all levels, unless such inheritance is explicitly overridden in
the subclass.

[[sec_4.2.1]]
==== Domain model

The S-131 domain model has two base classes ('root classes') from
which all the domain-specific geographic features and information
type classes are derived. The base classes are shown in <<fig_4.2>>
below. The base class for geographic features is *FeatureType* and
the base class for information types is *InformationType*. Each of
the two base classes has a set of attributes which are therefore inherited
by all domain-specific features. The approximate area features in
S-131 are also derived from the geographic feature root class. Both
base classes are abstract classes and do not have direct instances
in S-131 data -- instead, S-131 feature and information type data
objects are instantiations of a non-abstract class derived from one
of these base classes.

S-131 meta- and cartographic features are not derived from these base
classes -- S-131 instead incorporates meta- and cartographic feature
definitions originally prepared for S-101 in the interests of harmonization
and interoperability with other S-100-based data products, especially
S-101 ENCs.

[[fig_4.2]]
.Base classes in S-131
image::figure-2.png[]

[[sec_4.2.1.1]]
===== Overview of domain features and information types

Marine Harbour Infrastructure data products include harbour facilities,
port services and specially designated areas related to ship operations
in ports. It does not include protected areas, obstructions and other
physical features, or natural conditions. The broad categories of
geographic features and non-geographic information included in the
S-131 domain are:

* Harbour layout, including the locations of terminals and berths,
and contact information for terminal operators.
* Port services and related features such as waste reception facilities,
supplies, fuel, and repair facilities.
* Supporting infrastructure such as the nature of nearby transportation.
* The locations of infrastructure such as dry docks and syncrolifts.
* Specially designated locations relating to manoeuvres, such as fairways
and turning basins.

The geographic features are divided into "layout" and "physical infrastructure"
classes, which are used as abstract generalizations of the domain
feature classes. In addition, the *OrganizationContactArea/SupervisedArea*
hierarchy used in other domain models for nautical publications are
used as upper-level generalizations. <<fig_4.3>> depicts the hierarchy
of domain feature classes.

Geographic features use spatial types defined in the geometry package
for spatial attributes. Datasets comprised of S-131 features are described
by metadata as defined in the S-131 metadata package.

[[fig_4.3]]
.Overview of S-131 domain feature classes
image::figure-3.png[]

Information types model chunks of information associated to feature
types. Information types may be associated to other information types
or referenced by associations from feature types. The information
types used in S-131 are depicted in <<fig_4.4>>.

[[fig_4.4]]
.Information types
image::figure-4.png[]

The abstract class *FeatureType* is an abstract class from which the
geographic feature classes in the application schema are derived.
(Meta- and cartographic feature classes do not derive from it.) *FeatureType*
has attributes for fixed and periodic date ranges indicating the effective
dates of the feature, name of the feature, source information, types
of regulations, and a *textContent* attribute that allows text notes
or references to be provided for individual feature instances where
appropriate. The attributes defined in *FeatureType* are inherited
by all S-131 geographic feature types. All the attributes in *FeatureType*
are optional. A derived class may impose additional constraints, which
will be described in the definition of the derived class or the S-131
DCEG. <<fig_4.5>> depicts *FeatureType* and its attributes.

[[fig_4.5]]
.The root class FeatureType
image::figure-5.png[]

The abstract class *InformationType* is an abstract class from which
all the information type classes in the S-131 domain model
(except *SpatialQuality*) are derived. *InformationType* has attributes
for fixed and periodic date ranges, name associated with the individual
information object if any, source information, and a *textContent*
attribute that allows text notes or references to be provided for
individual instances where appropriate. The attributes defined in
*InformationType* are inherited by all S-131 information type classes.
All the attributes of *InformationType* are optional. A derived class
may impose additional constraints, which will be described in the
definition of the derived class or in the S-131 DCEG. <<fig_4.6>>
depicts *InformationType* and its attributes.

[[fig_4.6]]
.The root class InformationType
image::figure-6.png[]

[[sec_4.2.1.2]]
===== Layout

Layout features describe the layout of the harbour area. They include
terminal, mooring facilities, special areas within the harbour, berths,
designation of the positioning of specific berths along a wharf or
quay, dock areas, and a *HarbourAreaSection* feature for subdividing
harbour areas into sub-sections.

Note that the current model includes some features which would ideally
be merged into "categoryOfPortSection" attributes of other features,
due to GI Registry conceptual limitations on re-use of concepts.

[[fig_4.7]]
.Layout features
image::figure-7.png[]

[[sec_4.2.1.3]]
===== Physical Infrastructure

Physical infrastructure features include drydock and floating dock
facilities, ship lifts, gridirons, and straddle carriers. The features
are depicted in <<fig_4.8>>. Note that "ship lift" and "straddle carrier"
are modelled as *HarbourFacility* features with a category attribute,
due to current GI Registry conceptual limitations on the use of these
concepts.

[[fig_4.8]]
.Physical Infrastructure features
image::figure-8.png[]

[[sec_4.2.1.4]]
===== Services

Information about the services available in specific areas is modelled
by means of an information association from the feature to the
*AvailablePortServices* information type. This relationship is depicted
in <<fig_4.9>>. This type contains attributes for encoding various
types of services. Examples of the service enumerations are depicted
in <<fig_4.10>>

[[fig_4.9]]
.Port Services
image::figure-9.png[]

[[fig_4.10]]
.Service Enumerations and Codelists
image::figure-10.png[]

[[sec_4.2.1.5]]
===== Regulations

There are three main information types which represent regulations,
restrictions, and recommendations, respectively, and a fourth information
type for general or unclassifiable information.

* The *Regulations* class represents information derived from port
regulations, rules made by terminal operators, laws, national shipping
regulations, navigation rules, etc.

* Class *Restrictions* is intended for restrictions that are not derived
from regulatory sources.

* Class *Recommendations* is intended for information that is recommendatory
in nature; in S-131 this may be recommendations for the orientation
of vessels relative to the wharf while docking and similar pieces
of information that are either voluntary or have not been issued as
formal rules by the port authority or terminal operator.

The fourth class, **NauticalInformation**, is intended for general
notes or other information that cannot be categorized as one of the
other three classes.

These information types all inherit the attributes of their immediate
abstract superclass **AbstractRxN**, which provides attributes *textContent*
and *graphic* for textual and pictorial material respectively.
The sub-attributes of its complex attribute *rxnCode* allow optional
classification of the material encoded in *textContent*/*graphic*
according to the type of material and the kind of nautical activity
affected by it. They also inherit the attributes of abstract superclass
**InformationType**, which allows encoding of the effective and expiry
dates, if any, and the source of information
footnote:[Source information is currently broken out into three attributes:
source, sourceType, and reportedDate, due to GI Registry issues with
the complex attribute sourceIndication.],
if it is necessary to encode that data.

These classes are intended primarily for encoding textual information,
such as that which derives from textual source material such as port
handbooks, national or local laws or official publications.

The use of these information types to associate regulatory and other
information to individual features is described elsewhere (<<sec_4.2.1.8>>).
<<fig_4.11>> depicts the *Regulations*, *Restrictions*, *Recommendations*,
and *NauticalInformation* classes, their class hierarchy, and the
attributes of their generalizations *AbstractRxN* and *InformationType*
(which are inherited by the classes).

[[fig_4.11]]
.Regulations and other information types for primarily textual information
image::figure-11.png[]

[[sec_4.2.1.6]]
===== Contact information

The detailed model of contact information is shown in <<fig_4.12>>
below.

[[fig_4.12]]
.Contact information
image::figure-12.png[]

Contact information can be associated to an instance of an *Authority*
information type as well as to any feature that is a subtype of
*OrganizationContactArea*, which means any S-131 geographic feature
(meta and cartographic features do not allow this association). <<fig_4.13>>
shows the associations to *ContactInformation*.

[[fig_4.13]]
.Associations to contact information
image::figure-13.png[]

[[sec_4.2.1.7]]
===== Supervising organizations and their service hours

The *SupervisedArea* class models areas which may have an associated
organization (government or private) that exercises some kind of control
or supervision over the area.

Operating schedules and business hours of organizations are modelled
by associating the *ServiceHours* class to an *Authority*. The *ServiceHours*
class is a container for the complex attribute describing daily schedules
for different weekdays (*scheduleByDayOfWeek*). This complex attribute
contains another complex attribute for time intervals and the days
to which they apply, and category sub-attribute to model whether the
schedule describes opening hours, closures, etc. Exceptions to the
schedule such as fixed or movable holidays are modelled by a
*NonStandardWorkingDay* class with attributes allowing indication
of the dates or days which are holidays or exceptions.

Working times and schedules for particular features are modelled by
an analogous association from the feature object (association *LocationHours*).
When a *ServiceHours* is thus linked to a service feature, the service
hour information applies to the feature as a whole (e.g., all services
for a *Terminal*). Note that since working hours do not apply to all
features in the model, the associations are to individual features
instead of abstract supertypes.

Working times of 24 hours/day may be explicitly encoded
(from 00:00:00 to 24:00:00 hrs., in accordance with ISO 8601 conventions
for midnight at the beginning and end of a day).

The model for both kinds of schedules is shown in <<fig_4.13>>.

[[fig_4.14]]
.Working times and schedules
image::figure-14.png[]

The authority should be encoded only if its presence in the dataset
conveys information that is useful to the end user. In S-131 this
is expected to be the general case, but there may be exceptions, such
as when the authority is open for business but a particular location
under its jurisdiction is closed at certain times of day.

Since *Authority* also has an information association to *ContactDetails*
(<<fig_4.13>>), it is in principle possible to link a location to
both an *Authority* and *ContactDetails* as well as linking the location
to the same *ContactDetails*. Such linking is permissible but will
generally be redundant and should, if possible, be avoided as unnecessary
duplication. It may be done in situations where contact details for
an operating authority are different from contact details for the
service it operates.

<<fig_4.13>> also shows associations between service features and
*Authority*. *Authority*-*ContactDetails* associations are omitted
to reduce clutter.

[[sec_4.2.1.8]]
===== Regulations applying in specific locations

The *AssociatedRxN* association between a feature type and a *Regulations*,
*Restrictions*, *Recommendations*, or *NauticalInformation* object
(see <<fig_4.14>>) indicates that the Regulation, etc., is applicable
within the associated feature. If it is necessary to identify an authority
or organization related to a particular regulation (restriction, etc.)
object, this may be done using the *RelatedOrganisation* association
between *Regulations*, etc., and an *Authority* object. This should
be included only when the connection to the *Authority* conveys useful
information to the end user -- it is not intended to encode the issuing
or controlling authority for every regulation. Note also that while
*Authority* can be associated to geographic features as well as *Regulations*,
etc., encoding both associations is not mandatory even when the same
*Authority* is associated to a service area as well as a *Regulations*
object (or *NauticalInformation*, etc.).

[[fig_4.15]]
.Regulations, etc., applying to specific features
image::figure-15.png[]

[[sec_4.2.1.9]]
===== Regulations applying only to vessels with specific characteristics or cargoes

Certain regulations apply only to vessels of specified dimensions,
types, or carrying specified cargo, etc.

This is modelled by first defining the relevant subset of vessels
according to the dimension, type, cargo, etc., and then associating
that subset to the appropriate feature or information type.
The subset of vessels is modelled using the *Applicability* class,
which contains attributes for the most common vessel characteristics
used in nautical publications. These include measurements
(length, beam, draught), type of cargo, displacement, etc. Constraints
which cannot be modelled using the attributes of *Applicability* can
be described in plain text in its *information* attribute.

Conditions relating to vessel dimensions are modelled by the complex
attribute **vesselsMeasurements**, which has sub-attributes for naming
the dimension and indicating the limit (whether the condition applies
to a vessel which exceeds or falls below the limit). For example,
the combinations below describe the condition
"length overall > 50 m" (Condition 1) and "length overall < 90 m"
(Condition 2):

[[table_4.1]]
.Conditions relating to vessel dimensions
[cols="181,118,118,117"]
|===
| h| Condition 1 h| Condition 2 h| Condition 3

| *vesselsCharacteristics*      | length overall | length overall | breadth
| *comparisonOperator*          | greater than   | less than      | greater than
| *vesselsCharacteristicsValue* | 50             | 90             | 20
| *vesselsCharacteristicsUnit*  | metre          | metre          | metre
|===

The *logicalConnectives* attribute is used to indicate how to interpret
the case where multiple conditions are encoded using attributes of
measurements - whether the conditions described by condition attributes
are cumulative (conjunctive, AND) or alternatives (disjunctive, OR).
A *logicalConnectives*=AND combined with Conditions 1 and 2 above
describes a vessel of length between 50 and 90 metres; *logicalConnectives*=OR
combined with conditions 1 and 3 describes a vessel of length greater
than 50 metres or beam greater than 20 metres.

This modelling cannot represent subsets defined by both AND and OR
combinations of conditions, but it is always possible to convert such
complex conditions into multiple combinations each using only AND
('conjunctive normal form') or OR ('disjunctive normal form'), and
model the subset using more than one *Applicability* object. Multiple
instances of Applicability associated to the same feature or information
type are interpreted as alternatives (inclusive OR).

<<fig_4.15>> depicts the classes and attributes that can be used to
define subsets of vessels according to specified characteristics.

[[fig_4.16]]
.Vessel subsets characterised by cargo, dimensions and capabilities
image::figure-16.png[]

Given the relevant subset of vessels, it can be associated to the
appropriate feature, regulation, or report by a *PermissionType*,
or *InclusionType* association. These are association classes, whose
single attribute models the nature of the relationship between the
vessel subset and feature or information type. <<fig_4.16>> depicts
the use of vessel subsets in *PermissionType* or *InclusionType* associations.

The association classes *PermissionType* and *InclusionType* basically
characterize the relationship. For example:

. A specified set of vessels is COVERED by a regulation and another
set of vessels is EXEMPT from the regulation.
. Vessels with specified cargo and dimensions MUST use a specified
berth, vessels of smaller dimensions are RECOMMENDED to use the berth,
and naval transports are EXEMPT from using the berth.

"COVERED" and "EXEMPT" are different kinds of relationship between
different subsets of vessels characterized by different dimensional
limits, etc., and a given regulation.

"MUST use", "RECOMMENDED to use", and "EXEMPT from use" are relationships
between different subsets of vessels characterized by different dimensional
limits, etc., and a given feature or service.

[[fig_4.17]]
.Applicability of rules, etc., to vessel categories
image::figure-17.png[]

*PermissionType* links a feature to an *Applicability*, and models
a requirement, recommendation or prohibition on entry into a feature,
by the specified subset of vessels.

*Inclusion* links a *Regulation*, *Recommendation*, *Restriction*,
or *NauticalInformation* instance to a subset defined by an Applicability
object, and indicates whether the content of the *Regulation*, etc.,
applies to the vessels (membership=included), or whether it explicitly
does not apply (membership=excluded).

Informally:

. *Applicability* describes the set of vessels: i.e., who

. *Regulations* provides the text of the regulation: i.e., what

. The association class *InclusionType* describes the relationship
between who and what. That is, who "must (or can)" / "need not" do
what.

And:-

[start=4]
. A geographic feature defines a location or physical facility: i.e.,
where

. The association class PermissionType describes the relationship
between who and where. That is, who can / must / should / need not
use (or sail) where.

[[sec_4.2.1.10]]
===== Other uncategorized supplementary information

The domain model also provides a method for attaching to any feature
or information type data in the form of a text note, graphic, or Internet
reference which cannot be categorized using an appropriate feature
or information type. This consists of defining a *NauticalInformation*
object and referencing it from the feature or information type using
the *AdditionalInformation* association. This method is intended to
be a last resort and every effort should be made to use a more specific
feature or information type to encode the information to be attached,
including splitting the information in question across more than one
type of feature or information object as needed and/or using the
*AssociatedRxN* association instead of *AdditionalInformation*, wherever
the nature of the content allows it. See <<fig_4.17>>.

[[fig_4.18]]
.Attachment of uncategorizable information to any feature or information type
image::figure-18.png[]

[[sec_4.2.1.11]]
===== "Wrapper" complex attributes

S-131 provides a general method for encoding some kinds of information
using "wrapper" attributes that are basically a named type of text
content. The information is encoded in narrative form in a *textContent*
sub-attribute, which provides a general way to encode textual information.
<<fig_4.18>> depicts the wrapper attributes.

[[fig_4.19]]
.Wrapper Attributes
image::figure-19.png[]

[[sec_4.2.1.12]]
===== Feature relationships

Feature relationships in S-131 are depicted in <<fig_4.19>>. The feature
relationships can be generally characterized as follows:

*HarbourAreaAdministrative* is the main feature that covers the whole
port area. It is subdivided into zero or more sections modelled by
*HarbourAreaSection* features (the *LayoutDivision*) aggregation.
*HarbourAreaSection* can be further subdivided into *WaterwayArea*,
*Terminal*, *Berth*, *AnchorageArea*, *DockArea*, etc. The *Terminal*
feature can also be subdivided into *Berth* features using the same
association.

*HarbourAreaSection* can also be subdivided into further features
of the same class (the *SubUnit* self-association).

Nominal positions of berths can be indicated by associating a *BerthPosition*
feature to *Berth* using the *Demarcation* association.

Berth positions and Anchor berths can be linked to a mooring facility
using the *PrimaryAuxiliaryFacility* association.

Physical infrastructure features in a Terminal or *HarbourAreaSection*
feature should be linked to its container *Terminal* or *HarbourAreaSection*
by an *Infrastructure* association. If there is an hierarchy of features
containing the infrastructure only the feature at the lowest level
of the hierarchy should be linked to the infrastructure feature.

The outer limit of the whole harbour area can be associated to
*HarbourAreaAdministrative* feature using a *JurisdictionalLimit*
association.

[[fig_4.20]]
.Relationships between geographic features
image::figure-20.png[]

[[sec_4.2.2]]
==== Meta Features

S-131 provides four meta-features:

* *DataCoverage* for describing areas in the cell that are populated
with data. If the cell must include distant areas that are not part
of the port area, such areas will generally be excluded from the *DataCoverage*
feature(s).
* *QualityOfNonbathymetricData* for encoding quality information.
* *SoundingDatum* and *VerticalDatum* for encoding information about
the datums for depths and elevations respectively.

<<fig_4.21>> depicts the meta-features and their attributes.

[[fig_4.21]]
.Meta-feature classes
image::figure-21.png[]

[[sec_4.2.3]]
==== Spatial Quality Information Type

S-131 spatial quality of spatial primitives is encoded in the SpatialQuality
information type, which is associated to spatial objects. The modelling
is the same as in S-101. The attributes describe qualitative and quantitative
horizontal quality. See <<fig_4.22>>.

[[fig_4.22]]
.Spatial Quality
image::figure-22.png[]

[[sec_4.2.4]]
==== Cartographic Features

S-131 utilizes a single cartographic feature called TextPlacement
that is to optimise text positioning, such as at smaller scales to
prevent cluttering. This feature can be associated to any geographic
feature and gives the location of a text string relative to the location
of the feature. The modelling and use are the same as in S-101.
See <<fig_4.23>>.

[[fig_4.23]]
.Text Placement
image::figure-23.png[]



[[sec_5]]
== Feature Catalogue

[[sec_5.1]]
=== Introduction

The Feature Catalogue describes the feature types, information types,
attributes, attribute values, associations and roles which may be
used in the product. The S-131 Feature Catalogue is available in an
XML document which conforms to the S-100 XML Feature Catalogue Schema
and can be downloaded from the IHO Geospatial Information Registry
website (link:++https://registry.iho.int/++[]).

[[sec_5.2]]
=== Feature types

Feature types contain descriptive attributes that characterize real-world
entities. The word 'feature' may be used in one of two senses -- feature
type and feature instance. A feature type is a class and is defined
in a Feature Catalogue. A feature instance is a single occurrence
of the feature type and represented as an object in a dataset.
A feature instance is located by a relationship to one or more spatial
instances. A feature instance may exist without referencing a spatial
instance.

[[sec_5.2.1]]
==== Geographic

Geographic (geo) feature types carries the descriptive characteristics
of a real-world entity (a location or place on the surface of the Earth).
In the context of hydrographic products, this includes the adjacent
regions from the sea floor to elevations of landforms and structures
above the Earth's surface.

[[sec_5.2.2]]
==== Meta

Meta features contain information about other features within a dataset.
Information defined by meta features override the default metadata
values defined by the dataset descriptive records. Meta attribution
on individual features overrides attribution on meta features.

[[sec_5.2.3]]
==== Cartographic

Cartographic features contain information about the cartographic representation
(including text) of real world entities.

[[sec_5.3]]
=== Information types

Information types define identifiable pieces of information in a dataset
that can be shared using information associations. They have attributes
but have no geometry.

[[sec_5.3.1]]
==== Spatial quality

Spatial quality attributes are carried in an information class called
*SpatialQuality* (<<fig_4.21>>) Only points and curves can be associated
with spatial quality. Currently no use case for associating surfaces
with spatial quality attributes has been identified, therefore this
is prohibited. Vertical uncertainty is prohibited for curves as this
dimension is not supported by curves.

[[sec_5.4]]
=== Feature and information relationships

A feature relationship links instances of one feature type with instances
of the same or a different feature type.

An information relationship links instances of feature types or information
types to instances of information types.

[[sec_5.5]]
=== Attributes

S-131 defines attributes as either simple or complex.

[[sec_5.5.1]]
==== Simple attributes

S-131 uses seven types of simple attributes; they are listed in the
following Table:

[[table_5-1]]
.Simple attribute types
[cols="a,a"]
|===
h| Type h| Definition

| Boolean                 | A logical value, either 'True' or 'False'
| Integer                 | An integer number
| Real                    | A floating point number
| Enumeration             | One of a list of predefined values
| Text or CharacterString | General text.
| Date
| A date gives values for year, month and day according to the Gregorian
Calendar.

In XML formats including S-131, the XML Schema standard type
should be used instead of the ISO 8601 basic representation
(which is not a standard type in XML).

[example]
1998-09-18
| Truncated Date | A S100_TruncatedDate allows a date or partial date
to be given. At least one of the year/month/day components must be
present. Since S-131 uses XML formats for both dataset and metadata,
the XML encoding of truncated dates must be used (i.e., the ISO 8601
basic format is not used in S-131).

Components:YYYY Year integer between
0000 and 9999MM Month integer between 01 -- 12 (inclusive)DD Day integer
between 01 and 28, 29, 30, or 31 (inclusive), consistent with year
and month values if these are specifiedThis type can be used to encode
recurring instants (see S-100 Part 3, clause 3-8).

[example]
The appropriate XML Schema type should be used:--12-17 representing
17 December of any year (conforming to the XML type gMonthDay)S-100
Part 10b provides further details about encoding in GML datasets.

| Time | A 24-hour time, it may contain a time zone. Since S-131 uses
XML formats for both datasets and metadata, the XML encoding must
be used.

In XML formats (including S-131), the XML Schema standard
type should be used instead of the ISO 8601 basic representation
(which is not a standard type in XML).

[example]
====
18:30:59Z (local time in UTC);

18:30:59+01:00 (local time with given offset);

18:30:59 (local time without an offset to UTC).
====

| Codelist
| A type of flexible enumeration. A code list type is a list of literals
which may be extended only in conformance with specified rules.
| URI | A uniform resource identifier as defined in RFC 3986. Character
encoding of a URI shall follow the syntax rules defined in RFC 3986.

[example]
link:++http://registry.iho.int++[]
| URL
| A uniform resource locator (URL) is a URI that provides a means
of locating the resource by describing its primary access mechanism
(RFC 3986).

[example]
link:++http://registry.iho.int++[]
| URN | A persistent, location-independent, resource identifier that
follows the syntax and semantics for URNs specified in RFC 2141.

[example]
urn:iho:s101:1:0:0:AnchorageArea

|===

[[sec_5.5.2]]
==== Complex attributes

Complex attributes are aggregations of other attributes that are either
simple or complex. The aggregation is defined by means of attribute
bindings. Bindings of complex attributes are represented in the S-131
UML diagrams by a local attribute (<<fig_5.1>>, *HarbourAreaAdministrative*
/ _generalHarbourInformation_ attribute, _generalHarbourInformation/weatherResource_
attribute as well as other complex attributes whose internal details
are not shown in this figure).

[[fig_5.1]]
.Complex attribute
image::figure-24.png[]

[example]
In the left example the complex attribute *topmark* has three sub
attributes, one of which (*shape information*) is itself complex.
The *Buoy Lateral* feature may optionally include one instance of
*topmark*. In the right example the *Buoy Cardinal* feature may optionally
include one instance of *topmark* (as for the left example) and one
or more instances of *feature name*.

[[sec_5.6]]
=== Units of measure

The following units of measure are used in Marine Harbour Infrastructure
datasets;

* Orientation is given in decimal degrees
* Radio frequency is given in hertz
* Uncertainty is given in metres
* Distances are given in metres or nautical miles
* Depths are given in metres.

The feature catalogue specifies the unit of measure for each attribute
for which a unit is needed.


[[sec_6]]
== Coordinate Reference Systems (CRS)

[[sec_6.1]]
=== Introduction

An MHI dataset must define one geodetic CRS and one vertical CRS each
for depths and elevations.

[[sec_6.2]]
=== Horizontal Coordinate Reference System

The horizontal CRS must be EPSG:4326 (WGS84). The full reference to
EPSG: 4326 can be found at link:++http://www.epsg-registry.org/++[www.epsg-registry.org].

*Horizontal Coordinate Reference System:*:: EPSG:4326 (WGS84)

*Projection:*:: None

*Temporal reference system:*:: Gregorian calendar

*Coordinate Reference System registry:*:: link:++http://www.epsg-registry.org/++[EPSG Geodetic Parameter Registry]

*Date type (according to ISO 19115):*:: 002- publication

*Responsible party:*:: International Organisation of Oil and Gas Producers (IOGP)

*URL:*:: link:++http://www.iogp.org/++[\http://www.iogp.org]

[[sec_6.3]]
=== Vertical CRS for Depths and Elevations

The vertical CRS must be in metres. Depths are represented by positive
values, while negative values indicate intertidal (drying) soundings
(for depths).

Depths and elevations may be referenced to different vertical datums.
The vertical datum for each must be encoded in a meta-feature
(*SoundingDatum* for depths and *VerticalDatum* for elevations).
There should be only one vertical datum for all depths and only one
for all elevations.

[[sec_6.4]]
=== Projections

MHI datasets are un-projected.

[[sec_6.5]]
=== Temporal reference system

Time is measured by reference to Calendar dates and Clock time in
accordance with <<ISO_19108_2002>> Temporal Schema clause 5.4.4


[[sec_7]]
== Datasets

[[sec_7.1]]
=== Introduction

A dataset is a grouping of features, attributes, geometry and metadata
which comprises a specific coverage.

[[sec_7.1.1]]
==== Dataset rules

In order to facilitate the efficient processing of MHI data the geographic
coverage of a given *maximum display scale* may be split into multiple
datasets.

The discovery metadata of a dataset must list all the *Data Coverage*
features contained within that dataset and their assigned scale attributions.

An MHI update dataset must not change the limit of a *Data Coverage*
feature for the base MHI dataset. Where the limit of a *Data Coverage*
feature for a base MHI dataset is to be changed, this must be done
by issuing a New Edition of the dataset.

Datasets must not cross the 180° meridian; this includes both the
*Data Coverage* features and the bounding box for the dataset.

[[sec_7.1.2]]
==== Data Coverage rules

* All base datasets (new dataset, new edition and re-issue) must contain
at least one *Data Coverage* feature.
* The data boundary of the base dataset is defined by the extent of
the *Data Coverage* features and must be contained within the bounding
box.
* The *Data Coverage* features within a dataset must not overlap,
however *Data Coverage* features from different datasets may overlap
if they have differing maximum display scales.
* Datasets may overlap, however there must be no overlapping
*Data Coverage* features of the same *maximum display scale*, except
at the agreed adjoining national data limits, where, if it is difficult
to achieve a perfect join, a 5 metre overlapping buffer zone may be
used; and for this situation, there must be no gaps in data.
* When a dataset has multiple *Data Coverage* features, then the
*minimum display scale* must be the same for all *Data Coverage* features
within the dataset. The *maximum display scale* for multiple
*Data Coverage* features within a dataset may be different.
* When a dataset has multiple *Data Coverage* features then the
*maximum display scale* of the dataset must be equal to the largest
*maximum display scale* of the *Data Coverage* features.
* The *maximum display scale* is considered to be the equivalent of
the compilation scale of the data.

[[sec_7.2]]
=== Display scale range

A scale range of a dataset is used to indicate a range of scales between
which a producer considers the data is intended for use. The smallest
scale is defined by the *minimum display scale* and the largest scale
by the *maximum display scale*. These scales must be set at one of
the scales specified elsewhere in this product specification.

When the system's viewing scale is smaller than the value indicated
by **minimum display scale**, features within the *Data Coverage*
feature are not displayed, except where the System Database does not
contain a dataset covering the area at a smaller scale, in which case
the dataset will be displayed at all smaller scales. When the viewing
scale is larger than the value indicated by *maximum display scale*,
an overscale indication must be shown.

[[sec_7.3]]
=== Geometry

[[sec_7.3.1]]
==== S-131 geometry

Marine Harbour Infrastructure (MHI) features are encoded as vector
entities which conform to S-100 geometry configuration level 3a
(S-100 clause 7-4.3).

Level 3a is described by the following constraints:

* Each curve must reference a start and end point
(they may be the same).
* Curves must not self intersect. See S-100 Figure 7-5.
* Areas are represented by a closed loop of curves beginning and ending
at a common point.
* In the case of areas with holes, all internal boundaries must be
completely contained within the external boundary and the internal
boundaries must not intersect each other or the external boundary.
Internal boundaries may touch other internal boundaries or the external
boundary tangentially (that is at one point) as shown in S-100
Figure 7-6.
* The outer boundary of a surface must be in a clockwise direction
(surface to the right of the curve) and the curve orientation positive.
The inner boundary of a surface must be in a counter-clockwise direction
(surface to the right of the curve) and the curve orientation negative.
See S-100 Figure 7-7.

S-131 further constrains Level 3a with the following:

* Coincident linear geometry must be avoided when there is a dependency
between features.
* The interpolation of _GM_CurveSegment_ must be loxodromic.
* Linear geometry is defined by curves which are made of curve segments.
Each curve segment contains the geographic coordinates as control
points and defines an interpolation method between them. Coordinate
density can have a significant impact on file size and system performance.
A rule of thumb is to limit the coordinate density to 0.3 mm at maximum
permitted display scale.
* For a scale-less product, the producer should keep in mind the expected
scale range for typical use and the density of coordinates needed
to suit the needs of the product.

The following exception applies to S-131:

* The use of coordinates is restricted to two dimensions
(_DirectPosition_ is restricted to two coordinates).

[[sec_7.3.2]]
==== Masking

In certain circumstances, the symbolisation of a curve may need to
be suppressed. This is done using the _maskReference_ XML tag described
in S-100 10b-10.1.7.

[[sec_7.3.3]]
==== Coordinate encoding in spatial primitives

Geometry may be encoded either inline or by reference to a spatial
primitives located elsewhere in the dataset that encodes the actual
coordinate values. The GML conventions for references and axis order
must be followed.

The CRS shall be identified using the URI convention for SRS specified
by OGC, which is link:++http://www.opengis.net/def/crs/EPSG/0/4326"++[]
(Quote S-100 Ed.5.0.0 10b-11.7. ). The axis order is latitude/longitude.


[[sec_8]]
== Data Quality

[[sec_8.1]]
=== Introduction

Data quality allows users and user systems to assess fitness for use
of the provided data. Data quality measures and the associated evaluation
are reported as metadata of a data product. This metadata improves
interoperability with other data products and provides scope for usage
by user groups that the data product was not originally intended for.
The secondary users can make assessments of the data product usefulness
in their application based on the reported data quality measures.

For S-131 the following data quality elements have been included:

* Conformance to this Product Specification;
* Intended purpose of the data product;
* Completeness of the data product in terms of coverage;
* Logical consistency;
* Depth uncertainty and accuracy;
* Positional uncertainty and accuracy;
* Thematic accuracy;
* Temporal quality;
* Aggregation measures;
* Validation checks or conformance checks including:

* General tests for dataset integrity; and
* Specific tests for compliance against the S-131 data model.

[[sec_8.2]]
=== Quality measure elements

The data quality measures recommended in S-97 (Part C) and their applicability
in S-131 are indicated in <<table_8.1>> below. NA indicates the measure
is not applicable. This table reproduces the first 4 columns of the
data quality checklist recommended elements and replaces the final
column with descriptions of the scope of the element in the context
of S-131 datasets.

[[table_8.1]]
.Quality measure elements
[cols="a,a,a,a,a,a"]
|===
h| No. h| Data quality element and sub element h| Definition h| DQ measure / description h| Evaluation scope h| Scope in S-131

| 1 | Completeness / Commission
| Excess data present in a dataset, as described by the scope.
| numberOfExcessItems / This data quality measure indicates the number
of items in the dataset, that should not have been present in the
dataset.
| dataset/dataset series | All features and info types
| 2 | Completeness / Commission
| Excess data present in a dataset, as described by the scope.
| numberOfDuplicateFeatureInstances / This data quality measure indicates
the total number of exact duplications of feature instances within the data.
| dataset/dataset series | All features and info types
| 3 | Completeness / Omission | Data absent from the dataset, as described by the scope.
| numberOfMissingItems / This data quality measure is an indicator that shows that a specific item is missing in the data.
| dataset/dataset series/spatial object type | All features and info types
| 4 | Logical Consistency / Conceptual Consistency | Adherence to the rules of a conceptual schema. | numberOfInvalidSurfaceOverlaps / This data quality measure is a count of the total number of erroneous overlaps within the data. Which surfaces may overlap and which must not is application dependent. Not all overlapping surfaces are necessarily erroneous. | spatial object / spatial object type | Features with surface geometry; spatial objects of type surface
| 5 | Logical Consistency / Domain Consistency | Adherence of the values to the value domains. | numberOfNonconformantItems / This data quality measure is a count of all items in the dataset that are not in conformance with their value domain. | spatial object / spatial object type | All features and info types
| 6 | Logical Consistency / Format Consistency | Degree to which data is stored in accordance with the physical structure of the data set, as described by the scope | physicalStructureConflictsNumber / This data quality measure is a count of all items in the dataset that are stored in conflict with the physical structure of the dataset. | dataset/dataset series | All features and info types
| 7 | Logical Consistency / Topological Consistency | Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope. | rateOfFaultyPointCurveConnections / This data quality measure indicates the number of faulty link-node connections in relation to the number of supposed link-node connections. This data quality measure gives the erroneous point-curve connections in relation to the total number of point-curve connections. | spatial object / spatial object type | Features with curve geometry; spatial objects of curve types
| 8 | Logical Consistency / Topological Consistency | Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope. | numberOfMissingConnectionsUndershoots / This data quality measure is a count of items in the dataset within the parameter tolerance that are mismatched due to undershoots. | spatial object / spatial object type | Features with curve geometry; spatial objects of curve types
| 9 | Logical Consistency / Topological Consistency | Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope. | numberOfMissingConnectionsOvershoots / This data quality measure is a count of items in the dataset within the parameter tolerance that are mismatched due to overshoots. | spatial object / spatial object type | Features with curve geometry; spatial objects of curve types
| 10 | Logical Consistency / Topological Consistency | Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope. | numberOfInvalidSlivers / This data quality measure is a count of all items in the dataset that are invalid sliver surfaces. A sliver is an unintended area that occurs when adjacent surfaces are not digitized properly. The borders of the adjacent surfaces may unintentionally gap or overlap to cause a topological error. | dataset / dataset series | Features with surface geometry; spatial objects of type surface
| 11 | Logical Consistency / Topological Consistency | Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope. | numberOfInvalidSelfIntersects / This data quality measure is a count of all items in the dataset that illegally intersect with themselves. | spatial object / spatial object type | Features with surface geometry; spatial objects of type surface or curve
| 12 | Logical Consistency / Topological Consistency | Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope. | numberOfInvalidSelfOverlap / This data quality measure is a count of all items in the dataset that illegally self-overlap. | spatial object / spatial object type | Features with surface geometry; spatial objects of type surface or curve
| 13 | Positional Accuracy / Absolute or External Accuracy | Closeness of reported coordinative values to values accepted as or being true. | Root Mean Square Error / Standard deviation, where the true value is not estimated from the observations but known a priori. | spatial object / spatial object type | objects that have coordinative values associated.
| 14 | Positional Accuracy / Vertical Position Accuracy | Closeness of reported coordinative values to values accepted as or being true. | linearMapAccuracy2Sigma / Half length of the interval defined by an upper and lower limit in which the true value lies with probability 95%. | spatial object / spatial object type | N/A S-131 does not use 3-D coordinates..
| 15 | Positional Accuracy / Horizontal Position Accuracy | Closeness of reported coordinative values to values accepted as or being true. | linearMapAccuracy2Sigma / Half length of the interval defined by an upper and lower limit in which the true value lies with probability 95%. | spatial object / spatial object type | objects that have a horizontal coordinate values associated.
| 16 | Positional Accuracy / Gridded Data Position Accuracy | Closeness of reported coordinative values to values accepted as or being true. | Root mean square error of planimetry / Radius of a circle around the given point, in which the true value lies with probability P. | spatial object / spatial object type | NA. S-131 does not have features with gridded geometry
| 17 | Temporal Quality / Temporal Consistency | Consistency with time. | Correctness of ordered events or sequences, if reported. | dataset/dataset series/spatial object type | Features with time intervals, fixed/periodic date ranges, schedules.
| 18 | Thematic Accuracy / ThematicClassificationCorrectness | Comparison of the classes assigned to features or their attributes to a universe of discourse.
| miscalculationRate / This data quality measure indicates the number of incorrectly classified features in relation to the number of features that are supposed to be there. [Adapted from <<ISO_19157_2013>>] +
This is a RATE which is a ratio, and is expressed as a REAL number representing the rational fraction corresponding to the numerator and denominator of the ratio.

For example, if there are 1 items that are classified incorrectly
and there are 100 of the items in the dataset then the ratio is 1/100
and the reported rate = 0.01.
| dataset/dataset series/spatial object type | All features and info types
| 19 | Aggregation Measures / AggregationMeasures | In a data product specification, several requirements are set up for a product to conform to the specification. | DataProductSpecificationPassed / This data quality measure is a boolean indicating that all requirements in the referred data product specification are fulfilled. | dataset/dataset series/spatial object type | Dataset as a whole
| 20 | Aggregation Measures / AggregationMeasures
| In a data product specification, several requirements are set up
for a product to conform to the specification.
| DataProductSpecificationFailRate / This data quality measure is
a number indicating the number of data product specification requirements
that are not fulfilled by the current product/dataset in relation
to the total number of data product specification requirements.
| dataset/dataset series/spatial object type | Dataset as a whole
|===

[[sec_8.3]]
=== Test methods for data compliance and usability

Test methods for evaluating data compliance consist of executing the
relevant tests from the Validation Checks (Annex D) for each quality
element in <<table_8.1>> and counting the number of instances in the
dataset which fail the checks for that quality element.

Note that in some cases "executing the relevant test" may involve
comparing the encoded S-131 dataset to the source material by visual
means (e.g., for measures 17 and 18). For tests requiring visual comparison
of encoded data to source material, sampling methods may be used if
the volume of data precludes checking all the relevant data objects.

Accuracy computations for Positional Accuracy / Absolute or External
Accuracy should use the following recommendations:

Maximum RMSE (horizontal) = E / 10000

Where:

E = Denominator of intended scale of mapping

In addition to the above, dataset usability must be assessed against:

* Intended user requirements in regard to coverage, scale and specific
content requirements as defined by the Producing Agency and key stakeholders;

* Conformance to established maintenance processes (see Clause X.X); and

* Overall compliance with the S-131 Product Specification, including
context-specific evaluation of individual encoding instances for requirement
of conformance to checks classified as "Error" and "Warning" in
Annex D -- Validation Checks.

For dataset integrity requirements, see <<sec_13.8>>.

[[sec_8.4]]
=== Data quality testing and reporting

S-131 products must be tested with the S-131 specific checks prior
to release by the data producer. The data producer must review the
check results and address any issues to ensure sufficient quality
of the data products. The checks are a mix of data format validation
checks, conformance to standard checks and logical consistency checks.
The checks are listed in a separate Annex D.

Production and certification processes for S-131 data may include
a standalone quality report which provides full information on the
original results (with evaluation procedures and measures applied).
This report may be included in the exchange set as a support file
(discovery metadata for data quality reports should indicate the datasets
to which they apply and resource purpose "_other_"
(_ISOMetadataFile_ if the report is in ISO format).

Alternatively, a quality report distributed with the exchange set
may describe only the aggregated results along with a reference to
a location where the full results may be obtained.

Data Quality Measure Aggregation results should be computed to indicate
if the dataset/dataset series have passed the Product Specifications.
The elements which must be included are described in <<table_8.2>>
below.

[[table_8.2]]
.Elements of data quality aggregated report (extract from S-97 Part C checklist)
[cols="5"]
|===
h| Data quality element and sub element h| Definition h| DQ measure / description h| Evaluation scope h| Applicable to spatial representation types

| Aggregation Measures / AggregationMeasures
| In a data product specification, several requirements are set up
for a product to conform to the specification.
| DataProductSpecificationPassed / This data quality measure is a
boolean indicating that all requirements in the referred data product
specification are fulfilled.
| dataset | All features and information types of the dataset

| Aggregation Measures / AggregationMeasures
| In a data product specification, several requirements are set up
for a product to conform to the specification.
| DataProductSpecificationFailRate / This data quality measure is
a number indicating the number of data product specification requirements
that are not fulfilled by the current product/dataset in relation
to the total number of data product specification requirements.
| dataset | All features and information types of the dataset

|===


[[sec_9]]
== Data Capture and Classification

The S-131 MHI Data Classification and Encoding Guide (DCEG) describes
how data describing the real world should be captured using the types
defined in the S-131 Feature Catalogue. This Guide is provided as
Annex A.


[[sec_10]]
== Maintenance

[[sec_10.1]]
=== Introduction

This clause describes the requirement to adequately maintain datasets;
use of newly acquired source data; maintenance requirements within
the overall production process; and how Feature and Portrayal Catalogues
are to be managed within an S-100 based marine navigation system.

[[sec_10.2]]
=== Maintenance and update frequency

Datasets must be maintained as needed; and the overall production
process must include mechanisms for updating designed to meet the
needs of the mariner regarding safety of navigation.

[[sec_10.3]]
=== Data Source

Data Producers must use all available and applicable sources, as evaluated
against a robust data assessment process, to maintain and update datasets
as required.

[[sec_10.4]]
=== Production Process

Data Producers should follow their established production processes
for maintaining and updating datasets. Data must be maintained against
S-131 Annex A -- _Data Classification and Encoding Guide_, checked
against S-131 Annex D -- _Validation Checks_, and encapsulated in
GML conforming to the S-131 GML schema.

[[sec_10.5]]
=== Feature and Portrayal Catalogue management

For each new version of the S-131 Product Specification a new Feature
and Portrayal Catalogue will be released. The end user system must
be able to manage datasets and their corresponding Catalogues that
are created using different versions of the S-131 Product Specification.



[[sec_11]]
== Portrayal

[[sec_11.1]]
=== Introduction

S-131 portrayal is intended to provide a way to visualize the contents
of S-131 information either in isolation or in combination with an
S-101 ENC.

S-131 portrayal is covered by the portrayal model as defined in S-100.
The Portrayal Catalogue defines symbology and the portrayal rules
for each feature/attribute combination contained in the Feature Catalogue.

S-131 uses the portrayal process defined in S-100 Part 9A.

[[sec_11.2]]
=== Portrayal Catalogue

Citation information for the Portrayal Catalogue is provided in <<table_11-1>>
below.

[[table_11-1]]
.S-131 Portrayal Catalogue
[cols="4"]
|===
h| No. h| ISO class or attribute h| Type h| Value

| --    | CI_Citation           | Class                          | --
| 1     | title                 | CharacterString                | S-131 Portrayal Catalogue
| 2     | date                  | CI_Date (class)                | --
| 2.1   | date                  | DateTime                       | 2022-12-31 (or later - see note)
| 2.2   | dateType              | CI_DateTypeCode (ISO codelist) | publication
| 3     | edition               | CharacterString                | 1.0.0
| 4     | editionDate           | DateTime                       | 2022-12-31 (or later - see note)
| 5     | citedResponsibleParty | CI_Responsibility (class)      | --
| 5.1   | role                  | CI_RoleCode (ISO codelist)     | publisher
| 5.2   | party                 | CI_Organisation (class)        | --
| 5.2.1 | name                  | CharacterString                | International Hydrographic Organization
| 6     | otherCitationDetails  | CharacterString                | (reserved)
| 7     | onlineResource        | CI_OnlineResource (class)      | --
| 7.1   | linkage               | CharacterString (URL)          | link:++https://registry.iho.int/++[]
| 7.2   | name                  | CharacterString                | S-131 Portrayal Catalogue
| 7.3 | description | CharacterString
| XML Portrayal Catalogue accompanied by related files for symbols,
colour profiles, rules, etc

|===

NOTE: As of the preparation of this document, development tools and
viewers for S-100 GML datasets using S-100-conformant portrayal catalogues
are not available. The portrayal catalogue may therefore need to be
updated and later builds with later dates may become available as
development tools and viewers are updated.

[[sec_11.3]]
=== General rules and guidelines

[[sec_11.3.1]]
==== The attribute _language_

The attribute _language_ is intended to allow the portrayal implementation
to select instances of information types or complex attributes according
to the user's preferred language. Implementers should use _language_
values to structure the display according to the language settings,
for example to display feature names (from the _featureName_ complex
attribute) in the preferred language or link to support files in the
preferred language (as indicated by the _language_ attribute of complex
attribute _information_).

If there is no preferred language set by the display or there is no
instance in the preferred language, the default instance (designated
by the absence of a _language_ attribute or with _language_ attribute
indicating English) should be displayed.

The specification of the _language_ attribute in the IHO GI registry
states "The language is encoded by a 3 character code following
ISO 639-2/T." These codes and the corresponding language names for
display purposes may be obtained from the codelist _S100_MD_LanguageCode_
in the S-100 codelists file, which is part of the S-100 schemas distribution
footnote:[Available from link:++https://schemas.s100dev.net++[]. The XML and
human-readable versions of the codelists file for S-100 Edition 5.0.0
are located at
link:++https://schemas.s100dev.net/schemas/S100/5.0.0/resources/Codelists/cat/codelists.xml++[]
and
link:++https://schemas.s100dev.net/schemas/S100/5.0.0/resources/Codelists/cat/codelists.html++[]
respectively.].

[[sec_11.3.2]]
==== Structured text in displays

Sailing directions may provide information in structured form
(tables, bulleted or numbered lists, etc.), which may be taken as
guidance for online display of the S-131 equivalents, since mariners
may be familiar with the structure of similar information in printed
or digital publications.

[[sec_11.4]]
=== Schedules

Schedule information is encoded in the *ServiceHours* and *NonStandardWorkingDay*
information types. Schedules should be displayed as tabulations according
to the day of the week. A template for the tabulation is shown in
<<table_11.2>>. The objects and attributes from which the displayed
information is derived are shown in italics. Implementers may deviate
from the layout shown provided the resulting display shows at least
the information specified in the table (for example, exceptions from
*NonStandardWorkingDay* may be placed in an additional column instead
of a separate row, or merged into the _Notes_ column).

[[table_11.2]]
.General layout of schedules display
[cols="a,a,a,a"]
|===
h| Operations h| Days h| Times h| Notes

4+| (Table sub-header, from _featureName_ if present - omit this row
if _featureName_ is not present)Links to other unusual attributes
like source and graphic can be included here.

| Normal, Closed, Unmanned OR other: abcde

Attribute _categoryOfSchedule_

From _ServiceHours_ Date ranges _fixedDataRange, periodicDateRange_

| (Day(s) of week)

DoW (single day) +
OR +
DoW - DoW (if _dayOfWeekIsRange_ = _true_) +
OR +
DoW, DoW (if _dayOfWeekIsRange_ = false)

| (Times of day) +
hh:mm–hh:mm +
hh:mm–hh:mm …

_timeOfdayStart_, _timeOfDayEnd_

| (Additional information) +
_complex attribute information_

4+| (repeat _according to multiplicity of scheduleByDayOfWeek)_

| Exceptions

_NonStandardWorkingDay_ associated to the above _ServiceHours_
| (fixed and variable date(s) from _dateFixed_ or _dateVariable_) |
| (Additional information)_complex attribute information_

4+| _(repeat both rows above, according to multiplicity of ServiceHours
associated to the feature or information type)_

|===

[NOTE]
====
. The "Normal, Closed, …" row represents information from *ServiceHours*,
the "Exceptions" row from *NonStandardWorkingDay* associated to that
*ServiceHours*.
. If there is more than one *ServiceHours* instance associated to
the same feature or information type, the rows are repeated.
This might be the case if there are different schedules for different
types of operations (normal, unmanned, etc.).
. DoW represents _scheduleByDayOfWeek.timeIntervalsByDayOfWeek.dayOfWeek_.
. Times must be ordered according to the sequence of _timeOfDaystart_
and _timeOfDayEnd_ attributes in the dataset (this allows for encoding
multiple periods in the day if needed, for example 08:00 - 12:00 and
13:00 - 17:00).
. The "Notes" column contains the content of the information attribute
of *ServiceHours* or *NonStandardWorkingDay* (either the content of
the text sub-attribute or a link to the text, as appropriate).
. Inclusion of the header row(s) is left to implementer discretion.
. Other attributes (for example, _graphic_) are not expected to be
used for encoding schedule information, but if populated should be
accessible via the "Notes" column or in header or trailer rows.
====

Since S-100 Edition 5.0.0 portrayal does not provide for specifying
templates for text formatting, the implementation of tabular forms
must be left to implementers for this edition. As a provisional alternative,
information may be displayed in text form, with rows of <<table_11.2>>
converted to phrases:

Normal operation: (date range) DoW-DoW, hh:mm-hh:mm, (additional information/link)

Exceptions: (fixed/variable dates), (additional information/link)

[[sec_11.5]]
=== Limitations based on vessel dimensions and other characteristics

The information type *Applicability* may be displayed in either text
or tabular form. Of the attributes of Applicability, all but
_logicalConnectives_ express a conditional phrase, while _logicalConnectives_
encodes how the separate conditional phrases are linked.

Multiple values of attributes which allow more than one value (_categoryOfCargo_
and _categoryOfDangerousOrHazardousCargo_) should be treated as
"inclusive OR" (i.e., if _categoryOfCargo_=1 and 2, then it means
vessels with either bulk or container cargo, or both).

Text form means natural language phrases generated from the attributes
and their values. The suggested method is to generate a text phrase
from each attribute (except _logicalConnectives_) and its value, and
use _logicalConnectives_ to add connectives. For example, a single
*Applicability* object encoding all the three conditions in <<table_4.1>>
and _logicalConnectives_=AND can be converted as the condition:

"length overall greater than 50 metres AND less than 90 metres, AND
breadth greater than 20 metres"

or into a bulleted list:

* length overall greater than 50 metres, and
* length overall less than 90 metres, and
* breadth greater than 20 metres.

The text so generated should be linked or otherwise related to the
feature or information type to which it applies depending on the nature
(and attributes, if any) of the association between *Applicability*
and the feature or information type to which it is associated.
For example, the text generated might be preceded by the text of the
linked *Regulation* (for *InclusionType* associations), or the text
generated from *Applicability* appear in a hover box linked to a geographic
feature (for *PermissionType* associations).

Tabular display or mixed tabular/text display of conditions is also
allowable. The design of tabular forms is left to implementers in
this edition since S-100 portrayal in Edition 5.0.0 does not provide
for the specification of table templates.



[[sec_12]]
== Data Product format (encoding)

[[sec_12.1]]
=== Format specification

The format for datasets must conform to the S-131 GML schema specified
below. See S-100 Part 10b and the S-131 GML schema documentation for
a complete description of the data records, fields and subfields defined
in the encoding.

[[table_.1]]
.Format specification information
[cols="82,305,194"]
|===
h| Name h| ISO 19131 Elements h| Value

| Format name | DPS_DeliveryInformation.deliveryFormat > DPS_DeliveryFormat.formatName | GML
| Version     | DPS_DeliveryInformation.deliveryFormat > DPS_DeliveryFormat.version    | 3.2.1
| Specification description | DPS_DeliveryInformation.deliveryFormat > DPS_DeliveryFormat.specification
| S-100 profile of GML (S-100 Part 10b)
| Language | DPS_DeliveryInformation.deliveryFormat > DPS_DeliveryFormat.language | English
| Character set | DPS_DeliveryInformation.deliveryFormat > DPS_DeliveryFormat.characterSet > MD_CharacterSetCode | 004 -- utf8
| Additional Information | DPS_DeliveryInformation.additionalInformation > DPS.AdditionalInformation.additionalInformation
| GML schema for S-131 Edition 1.0.0 (link:++https://schemas.s100dev.net++[])

|===

[[sec_12.2]]
=== Encoding of latitude and longitude

Values of latitude and longitude must be accurate to 7 decimal places.
Coordinates must be encoded as decimals in the format described below.

* Values should be coded as decimal numbers with 7 or fewer digits
after the decimal. The normative encoding is in degrees, with an accuracy
of stem:[10^{-7}] degrees, i.e., 7 digits after the decimal point.
* The decimal point must be indicated by the "." character.
* Trailing zeroes after the decimal point (and the decimal point itself
if appropriate) may be omitted at producer discretion, but the accuracy
must still be as indicated (e.g., stem:[10^{-7}] degrees for coordinates
of default accuracy).

[[sec_12.3]]
=== Encoding of depths

Depths are encoded in the format and precision specified in the feature
catalogue for the corresponding attribute. Positive values indicate
distances below the applicable datum reference.

[[sec_12.4]]
=== Numeric attribute encoding

Integer attribute values must not contain leading zeros.

Floating point attributes must not contain leading zeros. Values in
the interval (-1, 1) may use a single zero before the decimal point.

Floating point attribute values must not contain non-significant trailing
zeros exceeding the attribute's precision as specified in the feature
catalogue.

[[sec_12.5]]
=== Text attribute values

Character strings must be encoded using the character set defined
in <<ISO_10646_1>>, in Unicode Transformation Format-8 (UTF-8).

[[sec_12.6]]
=== Mandatory attribute values

There are four reasons why attribute values may be considered mandatory:

* They determine whether a feature is in the display base,

* Certain features make no logical sense without specific attributes,

* Some attributes are necessary to determine which symbol is to be
displayed,

* Some attributes are required for safety of navigation.

All mandatory attributes are identified in the Feature Catalogue and
summarised in the Data Classification and Encoding Guide.

[[sec_12.7]]
=== Unknown attribute values

When an attribute code is present but the attribute value is missing,
it means that the producer wishes to indicate that this attribute
value is unknown.

[[sec_12.8]]
=== Object identifiers

Feature records must have a unique world-wide identifier. When an
MRN naming scheme is finalised by IHO, the identifier must be derived
from the MRN of the feature by a reversible 1/1 mapping (i.e., each
identifier must map to a corresponding unique MRN and each MRN must
map to a corresponding unique feature identifier).

MRN identifiers are not included in this version due to ongoing development
of the IHO guidelines in the use of MRN for product specifications.

Features, information types, collection objects, meta features, and
geometries (inline or external) are all required by the schema to
have a gml:id attribute with a value that is unique within the dataset.
The gml:id values must be used as the reference for the object from
another object in the same dataset or another dataset.

[[sec_12.9]]
=== Data coverage

All areas of a dataset must be covered by a *DataCoverage* meta feature.

An update dataset must not change the limit of a *DataCoverage* feature
for the base dataset. Where the limit of a *DataCoverage* feature
for a base dataset is to be changed, this must be done by issuing
a new edition of the dataset.

[[sec_12.10]]
=== Data overlap

S-131 datasets must not overlap other S-131 datasets of the same scale
range.

[[sec_12.11]]
=== Data quality meta-features

One or more *QualityOfNonBathymetricData* features must cover the
dataset.

[[sec_12.12]]
=== Data extent

Datasets must not cross the 180° meridian of longitude.

[[sec_12.13]]
=== Sequence of objects

The following sequence of objects is recommended:

[pseudocode%unnumbered]
====
Spatial records for by-reference geometries
    Point
    Multi point
    Curve
    Composite Curve
    Surface
Information objects
Feature objects
    Meta features
    Geo features
====

[[sec_12.14]]
=== Content of update datasets

Update datasets can only contain replacements, deletions, and additions
of whole feature instances or information instances. This means that
when a feature or information instance is updated, the new version
must contain all the attributes of the old instance, including any
inline spatial attributes (i.e., inline geometry), except those attributes
that are being removed.

An association to an instance of a feature or information type is
treated as an attribute of the referring instance, and therefore adding
or deleting an association means the original referring instance must
be replaced with a new version. The instance at the other end of the
association needs to be replaced if and only if it contains a reference
to the first instance.

Spatial objects that are not inline (i.e., geometry that is encoded
as an independent spatial object in the dataset) is treated like any
other object, i.e., it needs to be updated if and only if the primitive
has changed (e.g., a coordinate is updated).

Feature and information type instances are deleted without replacement
by setting the *fixedDateRange*.*dateEnd* attribute of the instance
to the date of deletion, which will usually be the issue date of the
update.

[[sec_12.15]]
=== Datum coverage

All features in a dataset with depth or elevation attributes must
be covered by *SoundingDatum* and *VerticalDatumOfData* meta-features
respectively.

[[sec_12.16]]
=== Attribute multiplicity

In general, if all the sub-attributes of a complex attribute are optional,
at least one of them should be present and have a value that is not
empty (or white space, for attributes of type "text" or types derived
from "text").

Similarly, if all the attributes of an information type are optional,
at least one of them should be present and have a non-empty value.

Note that there is no such general rule for features, though the DCEG
may require it for specific features.

These requirements are phrased as recommendations in Edition 1.0 in
order to facilitate the phased development of datasets. Future editions
may strengthen them as appropriate.


[[sec_13]]
== Data Product Delivery

Data which conforms to this Product Specification must be delivered
by means of an Exchange Set.

[[sec_13.1]]
=== Exchange set components

S-131 uses the same exchange set components and metadata as S-100.
<<fig_13.1>> depicts the exchange set components (datasets and feature/portrayal
catalogues) and exchange set metadata. This figure is derived from
Figure 17-2 in S-100 Edition 5.0.0. Note also that the link between
S100_Dataset and S100_CatalogueMetadata is implicit by means of the
S-131 version to which the feature catalogue, portrayal catalogue,
and dataset conform, which must have the same edition and revision
components.

[[fig_13.1]]
.Components and associated metadata for the S-131 exchange set (S-100 5.0.0 Figure 17-2)
image::figure-25.png[]

The rules governing the presence and roles of the exchange set components
depicted in <<fig_13.1>> are given below.

. Every exchange set must contain an Exchange Catalogue, represented
by *S100_ExchangeCatalogue* in <<fig_13.1>>.
. Dataset discovery metadata (*S100_DatasetDiscoveryMetadata*) must
be provided in the exchange catalogue for each S-131 dataset in the
exchange set.
. Catalogue metadata (*S100_CatalogueDiscoveryMetadata*) must be provided
in the exchange catalogue for any feature and portrayal catalogues
included in the exchange set.
. S-131 allows exchange sets to include the following types of support
files:

.. Text and picture support files referenced by datasets (*S100_SupportFile*).
.. Language packs (*S100_SupportFile*).
.. ISO metadata files (*ISOMetadataFile*).
. Text and picture support files referenced in a dataset must be included
in the exchange set.
. The inclusion of language packs and ISO metadata files in exchange
sets is optional.
. The file represented by the class *ISOMetadataFile* is an XML file
conforming to ISO 19115 3 format as specified in the ISO 19115-3 XML
schemas supplied by the ISO. Each ISO metadata file, if present, must
correspond to an S-131 dataset in the exchange catalogue.
. Producers must not depend on ISO metadata files to convey information
for ECDIS application processing, since processing these files is
not an ECDIS requirement. All information necessary for ECDIS processing
must be in CATALOG.XML. ISO metadata may be provided in exchange sets
intended for dual-purpose use on ECDIS and another (ISO-aware) application
such as some GIS.
. Language packs are described in S-100 Part 18 and provide translations
of feature catalogues.
. If an ISO metadata file or a language pack is included, a support
file discovery metadata block (*S100_SupportFileDiscoveryMetadata*)
describing the file must be included in the exchange catalogue. The
_supportFileSpecification_ field in the discovery block must specify
the applicable ISO standard. The ISO metadata file may repeat information
in the discovery blocks in the S-100 exchange catalogue. ISO metadata
files are not required unless it is necessary to provide S-131 datasets
for tools which require metadata in the <<ISO_19115_1>> format.
. A signature file for the exchange catalogue must also be included
in the exchange set (*S100_CatalogueSignature*).

The tangible representations of the structure classes in <<fig_13.1>>
within actual exchange sets are the digital files or folders containing
the exchange set, dataset(s), catalogue(s), and support files.
The tangible representations of their roles as depicted in <<fig_13.1>>
are the inclusion of the respective components within the exchange
set. Documentation tables for the structure classes are not provided
since the exchange set structure is described in this clause.

The metadata classes in <<fig_13.1>> are represented by XML files
or XML blocks and are documented in <<sec_14.2>>.

Each Exchange Set consists of one or more MHI datasets with an associated
XML metadata file and a single Exchange Catalogue XML file containing
metadata. It may also include one or more support files (or no support
files). The Exchange Set structure is the same as that described in
S-100 Clause 17-4.2.

[[sec_13.2]]
=== Encapsulation

Each dataset must be contained in a physically separate, uniquely
identified file on the transfer medium.

An Exchange Set is encapsulated into a form suitable for transmission
as packages (such as ZIP archives or files organised within a file
system folder/directory structure), containing both the exchange catalogue
and one or more data products (of possibly different S-100 types),
with each product covering a specific geographic region and specific
period of time.

The contents of an Exchange Set are :

* Mandatory elements
** Exchange Catalogue -- the XML encoded description of the content
of the Exchange Set (discovery metadata).

* Optional elements
** S-131 datasets -- Since it is possible for an exchange set to contain
only a feature or portrayal catalogue, or only a support file which
is being updated or delivered as a new file, datasets are an optional
component of S-131 exchange sets.
** Supplementary files -- These are contained within the Exchange
Set as files. If the exchange set contains a dataset, the support
files referenced in the dataset must be included.
** S-131 Feature Catalogue -- If it is necessary to deliver the latest
Feature Catalogue to the end user it may be done using the S-131 Exchange
Set mechanism for datasets.
** S-131 Portrayal Catalogue -- If it is necessary to deliver the
latest Portrayal Catalogue to the end user it may be done using the
S-131 Exchange Set mechanism for datasets.

[[sec_13.3]]
=== Dataset

[[sec_13.3.1]]
==== Types of Datasets

<<table_13.1>> lists the types of datasets which may be produced and
contained within an exchange set. The corresponding value of the dataset
discovery metadata "purpose" field and the format are also described.

[[table_13.1]]
.Types of datasets
[cols="88,311,108,80"]
|===
h| Dataset Type h| Explanation h| Encoding Format h| "purpose" field

| New dataset | Data for an area different (in coverage and/or extent)
from existing datasets.
| <<sec_12>> | _newDataset_

| Re-issue
| Includes all the updates applied to the original dataset up to the
date of the reissue. A Re-issue is intended to avoid unnecessary loading
of the Base cell and all applicable updates individually for new users
of the dataset, and therefore does not contain any new information
additional to that previously distributed by updates. A reissue dataset
can be issued at any time.
| As for new dataset | _reissue_

| New Edition of a dataset
| A re-issue plus new information which has not been previously distributed
by Updates. Each New Edition of a dataset must have the same name
as the dataset that it replaces and should have the same spatial extents.
The edition number in the dataset discovery metadata must increment
up by one from the previous edition.
| As for new dataset | _newEdition_

| Update dataset
| A delta change of the latest edition of a dataset. If there is more
than one update dataset, the subsequent update will be a delta of
the base dataset + earlier update datasets.
| As for new dataset. See <<sec_12.14>>. | _update_

| Cancellation
| Used to cancel dataset and any related update datasets.
The dataset is cancelled and is deleted from the system.

A cancellation dataset must be a pro-forma dataset containing only
header information (no instances of spatial objects, information types,
or feature types).
| As for new dataset, but containing only header information. | _cancellation_

|===

[[sec_13.3.2]]
==== Dataset file naming

All dataset files will have unique world-wide file identifiers.
The file identifier of the dataset should not be used to describe
the physical content of the file. The dataset file metadata that accompanies
the file will inform the user of the name and purpose of the file
(<<sec_13.3.1>>).

S-131 dataset files for new, reissue, new editions, and cancellation
datasets are named according to the specifications given below:

131CCCCXXXXXXXXXX.GML

The main part forms an identifier where:

* The first three characters are always "131" and identify the dataset
as an S-131 dataset.

* The next four characters identify the issuing agency by its alphanumeric
agency code in the IHO producer code register in the IHO GI Registry
(i.e., the IHO is identified as "AA", not "1810"). Where the agency
code consists of fewer than four characters, sufficient zeros must
be suffixed to make the length exactly four characters (e.g., "AA00US00"
instead of "US" - note that the 4-character code for IHO is exceptionally
"00AA" based on current information about plans for 4-character codes)
footnote:[Suffixing zeros is a temporary expedient pending conversion
of the IHO producer code registry to 4-character codes. When 4-character
IHO producer codes are published, they must be used.].

Suffixing zeros is a temporary expedient pending conversion of the
IHO producer code registry to 4-character codes. When 4-character
IHO producer codes are published, they must be used.

* The subsequent characters can be used in any way by the producer
to provide a unique file name for the dataset. The following characters
are allowed in the dataset name, A to Z, 0 to 9 and the special character
++_++ (underscore).

* The ninth and subsequent characters are optional (i.e., at least
one character must be used after the producer code).

* The maximum length of the file name must be 64 characters including
the extension and its preceding '." character. Note that since update
datasets must follow the same rule, allowing for updates lowers this
limit (e.g., allowing for 999 updates reduces the limit for base datasets
by 4 characters).

[[sec_13.3.3]]
==== Update dataset naming convention

All update dataset files will have an identical name to the base dataset,
aside from the separator and update number sequence.

S-131 update dataset files are named according to the specifications
given below:

131CCCCXXXXXXXXXX_XXX.GML

The main part forms an identifier where:

* The first character up to the final underscore characters are the
same as the dataset being updated and therefore conform to the rules
described in <<sec_13.3.2>>.
* The next character must be an underscore "++_++".
* The next three characters must be numerical (0-9) characters to
indicate the place of the update dataset in the update sequence.
* The maximum length of the name must be 64 characters including the
extension and its preceding "." character.

[[sec_13.3.4]]
==== New Editions, re-issues, updates and cancellations

This section defines the sequencing of S-131 datasets for New Editions,
updates and re-issues. In order to ensure that feature type updates
are incorporated into an end user system in the correct sequence without
any omission, a number of parameters encoded in the data are used
in the following way:

*Edition number*:: When a dataset is initially created (Base dataset),
the Edition number 1 is assigned to it. The Edition number is increased
by 1 at each New Edition.

*Update number*:: Update number 0 is assigned to a new dataset and
a New Edition. The first update dataset file associated with this
new dataset must have update number 1. The update number must be increased
by one for each subsequent update, until a New Edition is released.

A re-issue of a dataset must have the update number of the last update
applied to the dataset, and use the same Edition number.

*Update comment*:: Comment for describing the change introduced by
an update.

*Issue date*:: Date up to which the Data Producer has incorporated
all applicable changes. The issue date must be greater than the previous
issue date of the dataset.

In order to cancel a dataset, an update dataset file is created for
which the Edition number must be set to 0. This message is only used
to cancel a dataset. Where a dataset is cancelled and its name is
reused at a later date, the issue date must be greater than the issue
date of the cancelled dataset. When the dataset is cancelled it must
be removed from the system.

An Exchange Set may contain Base dataset files and update dataset
files for the same datasets. Under these circumstances the update
dataset files must follow on in the correct sequential order from
the last update applied to the Base dataset file.

[[sec_13.3.5]]
==== Exchange set structure

The structure of an S-131 exchange set must be according to the structure
described below, which is based on S-100 Clause 17-4.2.
The S-131 exchange set structure is depicted in <<fig_13.2>>.

. All content must be placed inside a top root folder named S100_ROOT.
This is the only top level root folder in an exchange set containing
only S-100 products.

. The S100_ROOT folder must contain a subfolder for S-131 which holds
content specific to S-131.

. An S-131 exchange set must contain an exchange set catalogue, CATALOG.XML,
its digital signature CATALOG.SIGN and may contain any number of S-131
conformant dataset files and catalogue files.

. The S-131 subfolder must contain subfolders for the component dataset
files (DATASET_FILES), support files (SUPPORT_FILES), and catalogues
(CATALOGUES) as required:
.. The DATASET_FILES subfolder is required if and only if the exchange
set contains an S-131 dataset.
.. The CATALOGUES subfolder is required if and only if the exchange
set contains a feature, interoperability, or portrayal catalogue.
.. The SUPPORT_FILES folder is required if and only if the exchange
set contains at least one S-131 support file.

. The DATASET_FILES folder must contain a subfolder named according
to the producer code.
. Individual data files must be placed under the producer subfolder,
either directly in the producer folder, or within a lower-level subfolder
hierarchy. Individual data files may be optionally placed in their
own subfolders or grouped with other data files.

. An exchange set may carry feature and portrayal catalogues in different
versions, which should also be grouped together in the CATALOGUES
folder.

. If a portrayal catalogue is included in the exchange set, it may
be packaged as either a ZIP archive containing all portrayal catalogue
files, or a filesystem structure of folders and files. The structure
of portrayal catalogues is described in S-100 Part 9 Clause 9-13.2.

. Except for the signature of the exchange catalogue file (CATALOG.XML),
which is in the CATALOG.SIGN file, all digital signatures are included
within their corresponding resource metadata records in CATALOG.XML.

. Dataset and catalogue file and/or folder names should be such as
to avoid inadvertent overwriting of files.

. Digital signatures for exchange sets conforming to Edition 1.0.0
of S-131 may be dummy values (values that conform to the format requirements
but are not actual signatures). Proper digital signatures will be
mandatory when S-131 reaches Readiness Level 3 (cf. S-97 1.1.0 Clause A-5).

[[fig_13.2]]
.Typical Exchange Set structure
image::figure-26.png[]

[[sec_13.4]]
=== Support files

Dataset support files offer supplementary information that can be
included in an MHI Exchange Set.

* Plain text files must contain only general text as defined by this
standard (text consisting only of printable characters and without
HTML, XML, or other markup). The extension must be TXT.
* HTML and XML files must contain only text and markup as defined
in the relevant W3C standards. Files must use the UTF-8 character
set encoding. References in datasets to HTML and XML support files
must treat them as text files (i.e., they should not be referenced
using attributes intended for picture files). The extension must be
HTM for HTML files and XML for general XML files.
* Picture files must be in TIFF (6.0 specification) and use the extension
TIF.

[[table_.2]]
.Support file formats and extensions
[cols="3"]
|===
h| File Types h| Extensions h| Comment

.3+| *Text* | TXT | Plain-text files

| HTM
| HTML files must only include inline or embedded Cascading Style
Sheet (CSS) information and must not contain embedded Javascript or
other dynamic content, for example DHTML, Flash etc.

| XML
| XML documents must only be included in accordance with guidance
provided within the Data Classification and Encoding Guide
(Annex A). This may include a Schema for the validation of XML documents.
| *Picture* | TIF | Baseline TIFF 6.0.
|===

[[sec_13.4.1]]
==== Support File Naming

All support files must have unique file identifiers. The support file
metadata that accompanies the file will inform the user of the name
and purpose of the file (that is new, replacement and deletion).

In this encoding the support files are named according to the specifications
given below:

131CCCCØØØØØØØØØØ.EEE

The main part forms an identifier where:

* 131 -- the first 3 characters identify the support file as applicable
to an S-101 dataset (mandatory).

* CCCC -- the fourth to seventh characters identify the Producer Code
of the issuing agency (mandatory). Where the Producer Code is derived
from a 2 or 3 character format (for instance when converting S-57
ENCs), the missing characters of the Producer Code must be populated
with zeros ("00" or "0" respectively) for the sixth and seventh characters
of the support file name, as required.

* ØØØØØØØØØØ -- the eighth and following characters are optional and
can be used in any way by the Producer to provide the unique support
file name. The following characters are allowed in the support file
name: A to Z, 0 to 9 and the special character ++_++ (underscore).

* .EEE -- support file extension. (TXT, HTM, XML or TIF).

* The maximum length of the file name (including the extension and
preceding ".") is 64 characters.

[[sec_13.4.2]]
==== Support file management

When a support file is created or a subsequent version is issued it
must carry its own issue date and be supported with a digital signature
which authenticates it against the Producer's public key included
in the Exchange Set metadata.

The type of support file is indicated in the "purpose" field of the
discovery metadata. Three types: new, replacement and deletion are
defined. Support files carrying the "deletion" flag must be removed
from the system. When a feature pointing to a text, picture or application
file is deleted or updated so that it no longer references the file,
the system software must check to see whether any other feature references
the same file, before that file is deleted.

Each support file required must be included only once in the Exchange
Set.

Support files must be stored in a separate folder within the Exchange
Set, refer to <<fig_13.2>> -- Typical Exchange Set structure.

Re-use of a support file name after a deletion period is possible
only if the support file edition number is higher than the previous
edition number before deletion.

Only the latest edition of a support file can be used. As soon as
a New Edition is created and installed, the older version is retired
and can no longer be used by any feature.

If a support file is associated with multiple features in one or several
datasets, a New Edition of the file will immediately be used by all
associated features.

Picture and text files are treated differently with respect to changes
not applicable to all features or information types referencing the
support file.

. *Picture files*: If a New Edition of a picture support file contains
changes not applicable to all features or information type instances
that reference the original picture, a completely new picture file
must be created. Updates changing the file reference in the feature
or information type instances that use the new picture must be generated
and distributed as updates to the appropriate datasets.

. *Text files*: The possibility that different feature or information
type instances reference different portions of the file (by means
of _fileLocator_ attributes) must be taken into account.
.. For plain-text files (TXT), since users may see additional portions
of the file as well as the specific section referenced, the same criteria
as picture files must be applied and a new TXT file created if there
are objects that still need the old information.
.. For HTML and XML files, instances may have _fileLocator_ attributes
that point to either HTML "anchors" (i.e., bookmarks) or specific
sections identified by an "id" attribute. If some instances still
need to reference the old information, there are two possible solutions:
... An updated support file can be created with the new information
added in a new section of the file, identified by a new "HTML anchor"
or "id" attribute. Feature and information type instances that need
to reference the changed information must have their _fileLocator_
values updated to reference the new section or bookmark.
... A new support file can be created and feature and information
type instances that need to reference the new information must have
their _fileReference_ and _fileLocator_ attributes updated.
.. If there are no _fileLocator_ attributes in referencing instances,
a new support file may be created or the existing support file may
be updated to add the new information and facilitate locator attributes
by adding HTML anchors or XML id attributes. The affected feature
or information type instances must be updated accordingly.

. In all cases, the file content must be reviewed and updated to ensure
that there is no possibility of reader confusion. For example, if
a regulation changes only for some regions, a sentence to the effect
that "Revised for regions X, Y, and Z effective from (date)" may be
added.

The potential necessity of appropriate changes in referencing instances
should also be considered, for example to picture caption or _headline_
attributes.

In deciding between options, producers should consider the expected
lifetime of support files and the effects on update frequency for
both datasets and support files, especially in connection with removal
of obsolete information from the system as a whole as well as the
removal of obsolete sections within support files.

[[sec_13.5]]
=== Exchange Catalogue

The Exchange Catalogue acts as the table of contents for the Exchange
Set. The Catalogue file of the Exchange Set must be named CATALOG.XML.
No other file in the Exchange Set may be named CATALOG.XML. The contents
of the S-131 Exchange Catalogue are described in <<sec_14>>.

[[sec_13.6]]
=== Dataset loading

Datasets must always be loaded in the order of base dataset first,
then update datasets in the corrected sequential order. Systems are
not to load updates out of order, for example if update 1-5 is present,
then 6 is missing, update 7 must not be loaded.

[[sec_13.6.1]]
==== New editions

When a new edition of a dataset is received, the system must replace
the previous edition, along with any updates with the new edition
of the dataset. Loading of subsequent updates follows the same rule
as above.

[[sec_13.7]]
=== Dataset size

MHI datasets must not exceed 20MB.

Update datasets must not exceed 500KB.

[[sec_13.8]]
=== Data integrity and encryption

Out of scope for S-131 Edition 1.0.0. Under development by S-100WG
and will be included for Edition 2.0.0.


[[sec_14]]
== Metadata

[[sec_14.1]]
=== Introduction

For information exchange, there are several categories of metadata
required:

* metadata about the overall exchange set and catalogue;
* discovery metadata about each of the datasets contained in the catalogue;
and
* discovery metadata about the support files that make up the package.

The discovery metadata classes have numerous attributes which enable
important information about the datasets and accompanying support
files to be examined without the need to process the data, for example,
decrypt, decompress, load, etc.

Discovery metadata for each dataset is given in an XML block within
the exchange set catalogue file, and can be accessed without opening
the GML dataset file. Discovery metadata is described in <<sec_14.2>>.

Since S-131 does not add product-specific metadata attributes, the
S-100 metadata classes and schema are used in S-131 exchange sets
without extension. The constraints S-131 imposes on generic S-100
metadata are included in <<sec_14.2>>, generally as remarks describing
the extra conditions and restrictions imposed by S-131 (such as making
an optional attribute mandatory).

The S-131 product specification package includes an implementation
of the S-131 constraints on metadata attributes) as Schematron rules
in files available from the IHO schema server. The generic S-100 schemas
distribution includes a similar implementation of "sanity checks"
and S-100 constraints However, neither S-100 not S-131 mandate use
of Schematron processors or the distributed Schematron rule files
in implementations. Implementers may substitute any implementation
method to apply or check constraints instead of using a Schematron-capable
processor, including re-encoding the constraints in any suitable
implementation-specific language.

This clause defines the mandatory and optional metadata needed for
S-131. In some cases (if provided by the producer or exchange set
packager) the metadata may be repeated in a language other than English.
See S-100 Part 17 Clauses 17-4.6 - 17-4.8 for guidance on encoding
of metadata in languages other than English.

[[sec_14.2]]
=== Discovery metadata

An outline of the overall concept of an S-131 exchange set for the
interchange of geospatial data and its relevant metadata is explained
in <<sec_13>>. The place of metadata in the exchange set is summarised
in <<sec_13.1>>.

<<fig_14.1>> depicts the structure of the exchange catalogue and its
component discovery metadata blocks.

[[fig_14.1]]
.Relationship between exchange catalogue, discovery metadata, and dataset (from S-100 5.0.0 Figure 17-6).
image::figure-27.png[]

The detailed structure of the S-131 exchange catalogue is depicted
in <<fig_14.2>>. This figure is derived from Figure 17-7 in S-100
Edition 5.0.0, with the following restriction:

* Elements that are optional in the generic S-100 catalogue model
but not used in S-131 are not shown; for example, the ISO 8211 and
HDF5 formats in *S100_EncodingFormat*.

[[fig_14.2]]
.Details of exchange set catalogue classes. (Derived from S-100 Figure 17-7.)
image::figure-28.png[]

The following clauses define the mandatory and optional metadata needed
for S-131. In some cases the metadata may be repeated in a national
language. If this is the case it is noted in the Remarks column.

In the following clauses, wherever S-131 makes an optional S-100 metadata
attribute mandatory (that is, restricts multiplicity from 0.. to 1..),
the restricted multiplicity is shown in place of the multiplicity
given in S-100 Part 17. When this is done, the Remarks column contains
a note about the restriction. Further, enumerations in the figure
and the following clauses show only the values allowed in S-131 Exchange
Catalogues. These differences from the S-100 generic metadata are
in red bold font.

[%landscape]
<<<

[[sec_14.2.1]]
==== S100_ExchangeCatalogue

The Catalogue file is defined in XML Schema language. The Exchange
Catalogue inherits the dataset discovery metadata and support file
discovery metadata from S-100 with additional S-131-specific restrictions.

[cols="a,a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult h| Type h| Remarks

| Class | S100_ExchangeCatalogue
| An exchange catalogue contains the discovery metadata about the exchange datasets and support files | - | -
| *The optional S-100 attributes _identifier_, _contact_, and _productSpecification_ are mandatory in S-131.*

| Attribute | identifier | Uniquely identifies this exchange catalogue | *1* | S100_ExchangeCatalogueIdentifier | *Mandatory in S-131.*
| Attribute | contact | Details about the issuer of this exchange catalogue | *1* | S100_CataloguePointOfContact | *Mandatory in S-131.*
| Attribute | productSpecification | Details about the product specifications used for the datasets contained in the exchange catalogue | *1* | S100_ProductSpecification | *Mandatory in S-131*.
| Attribute | defaultLocale | Default language and character set used for all metadata records in this Exchange Catalogue | 0..1 | PT_Locale | Default is English and UTF-8
| Attribute | otherLocale | Other languages and character sets used for the localized metadata records in this Exchange Catalogue | 0..++*++ | PT_Locale | Required if any localized entries are present in the Exchange Catalogue

| Attribute | exchangeCatalogueDescription | Description of what the exchange catalogue contains | 0..1 | CharacterString |

| Attribute | exchangeCatalogueComment | Any additional Information | 0..1 | CharacterString |

| Attribute | certificates | Signed public key certificates referred to by digital signatures in the Exchange Set | 0..++*++ | S100_SE_CertificateContainer | Content defined in S-100 Part 15. All certificates used, except the SA root certificate (installed separately by the implementing system) shall be included

| Attribute | dataServerIdentifier | Identifies the data server for the permit | 0..1 | CharacterString |

| Role | datasetDiscoveryMetadata | Exchange Catalogues may include or reference discovery metadata for the datasets in the Exchange Set | 0..++*++
| Aggregation S100_DatasetDiscoveryMetadata |

| Role | catalogueDiscoveryMetadata | Metadata for Catalogue | 0..++*++ | Aggregation S100_CatalogueDiscoveryMetadata | Metadata for the Feature, Portrayal and Interoperability Catalogues, if any

| Role | supportFileDiscoveryMetadata | Exchange Catalogues may include or reference discovery metadata for the support files in the Exchange Set | 0..++*++
| Aggregation S100_SupportFileDiscoveryMetadata |

|===

[[sec_14.2.1.1]]
===== S100_ExchangeCatalogueIdentifier

[cols="6",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult h| Type h| Remarks

| Class | S100_ExchangeCatalogueIdentifier | An Exchange Catalogue contains the discovery metadata about the exchange datasets and support files | - | - | -
| Attribute | identifier | Uniquely identifies this Exchange Catalogue | 1 | CharacterString | E.g., US00131_<LOCODE>_20200101
| Attribute | dateTime | Creation date and time of the Exchange Catalogue, including time zone | 1 | DateTime | Format: yyyy-mm-ddThh:mm:ssZ

|===

[[sec_14.2.1.2]]
===== S100_CataloguePointOfContact

[cols="6",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult h| Type h| Remarks

| Class | S100_CataloguePointOfContact
| Contact details of the issuer of this Exchange Catalogue | - | - | -
| Attribute | organization | The organization distributing this Exchange Catalogue | 1 | CharacterString
| This could be an individual producer, value added reseller, etc
| Attribute | phone   | The edition number of this Exchange Catalogue | 0..1 | CI_Telephone |
| Attribute | address | The address of the organization               | 0..1 | CI_Address   |
|===

[[sec_14.2.2]]
==== S100_DatasetDiscoveryMetadata

[cols="a,a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult h| Type h| Remarks

| Class | S100_DatasetDiscoveryMetadata | Metadata about the individual datasets in the exchange catalogue | - | -
| *The optional S-100 attributes _datasetID_, _editionNumber_, _updateNumber_
and _boundingBox_ are mandatory in S-131.*

*The optional S-100 attribute _temporalExtent_ is not used.*

| Attribute | fileName | Dataset file name | 1 | URI | See S-100 Part 1, clause 1-4.6
| Attribute | description | Short description giving the area or location covered by the dataset | 0..1 | CharacterString | E.g. a harbour or port name, between two named locations etc.
| Attribute | datasetID | Dataset ID expressed as a Marine Resource Name | *1* | URN | The URN must be an MRN. *Restricted to mandatory in S-131*
| Attribute | compressionFlag | Indicates if the resource is compressed | 1 | Boolean | _true_ indicates a compressed dataset resource +
_false_ indicates an uncompressed dataset resource
| Attribute | dataProtection | Indicates if the data is encrypted | 1 | Boolean | _true_ indicates an encrypted dataset resource +
_false_ indicates an unencrypted dataset resources
| Attribute | protectionScheme | Specification of method used for data protection | 0..1 | S100_ProtectionScheme | In S-100 Edition 5.0.0 the only allowed value is "S100p15".

| Attribute | digitalSignatureReference | Specifies the algorithm used to compute digitalSignatureValue | 1 | S100_DigitalSignatureReference (see S-100 Part 15) |

| Attribute | digitalSignatureValue | Value derived from the digital signature | 1..++*++ | S100_DigitalSignatureValue (see S-100 Part 15) | The value resulting from application of __digitalSignatureReference__Implemented as the digital signature format specified in Part 15
| Attribute | copyright | Indicates if the dataset is copyrighted | 1 | Boolean | _true_ indicates the resource is copyrighted +
_false_ Indicates the resource is not copyrighted
| Attribute | classification | Indicates the security classification of the dataset | 0..1 | MD_SecurityConstraints> MD_ClassificationCode (codelist)
|
. unclassified
. restricted
. confidential
. secret
. top secret
. sensitive but unclassified
. for official use only
. protected
. limited distribution

| Attribute | purpose | The purpose for which the dataset has been issued | 0..1 | S100_Purpose |

| Attribute | notForNavigation | Indicates the dataset is not intended to be used for navigation | 1 | Boolean
| _true_ indicates the dataset is not intended to be used for navigation +
_false_ indicates the dataset is intended to be used for navigation
| Attribute | specificUsage | The use for which the dataset is intended | 1 | MD_USAGE>specificUsage (character string) | Information about specific usage(s) for which the dataset is intended. The string value "general" may be encoded if there is no specific usage.
| Attribute | editionNumber | The edition number of the dataset | *1* | CharacterString | *Mandatory in S-131.*
| Attribute | updateNumber | Update number assigned to the dataset and increased by one for each subsequent update | *1* | Integer | Update number 0 is assigned to a new dataset**Made mandatory in S-131.**
| Attribute | updateApplicationDate | This date is only used for the base cell files (that is new data set, re-issue and new edition), not update cell files. All updates dated on or before this date must have been applied by the producer | 0..1 | Date | This date is only used for the base dataset files (that is new dataset, re-issue and new edition), not update dataset files. All updates dated on or before this date must have been applied by the producer
| Attribute | referenceID | Reference back to the datasetID | 0..1 | URN | Update metadata refers to the datasetIDof the dataset metadata. This is used ifand only if the dataset is an updateThe URN must be an MRN

| Attribute | issueDate | Date on which the data was made available by the data producer | 1 | Date |

| Attribute | issueTime | Time of day at which the data was made available by the data producer | 0..1 | Time | Mandatory when the interval between datasets is shorter than 1 day, such as 6-hourly forecasts.
| Attribute | boundingBox | The extent of the dataset limits | *1* | EX_GeographicBoundingBox | *Mandatory in S-131.*

| Attribute | productSpecification | The product specification used to create this dataset | 1 | S100_ProductSpecification |

| Attribute | producingAgency | Agency responsible for producing the data | 1 | CI_ResponsibleParty>CI_Organisation | See S-100 Table 17-3

| Attribute | producerCode | The official IHO Producer Code from S-62 | 0..1 | CharacterString |

| Attribute | encodingFormat | The encoding format of the dataset | 1 | S100_EncodingFormat | *Must be GML*
| Attribute | dataCoverage | Area covered by the dataset | *1*..++*++ | S100_DataCoverage | *Mandatory in S-131.*

| Attribute | comment | Any additional information | 0..1 | CharacterString |

| Attribute | defaultLocale | Default language and character set used in the exchange catalogue | 1 | PT_Locale |

| Attribute | otherLocale | Other languages and character sets used in the exchange catalogue | 0..++*++ | PT_Locale |

| Attribute | metadataFileIdentifier | Identifier for metadata file | 1 | CharacterString | For example, for ISO 19115-3 metadata file
| Attribute | metadataPointOfContact | Point of contact for metadata | 0..1 | CI_Responsibility > CI_Individual or CI_Responsibility > CI_Organisation | Only if metadataPointOfContact isdifferent from producingAgency.

See S-100 Tables 17-2 and 17-3.
| Attribute | metadataDateStamp | Date stamp for metadata | 0..1 | Date | May or may not be the issue date of the dataset.

| Attribute | replacedData | If a data file is cancelled is it replaced by another data file | 0..1 | Boolean |

| Attribute | dataReplacement | Cell name | 0..++*++ | CharacterString | A dataset may be replaced by 1 or more datasets
| Attribute | navigationPurpose | Classification of intended navigation purpose (for Catalogue indexing purposes) | 0..3 | S100_NavigationPurpose | Mandatory when _notForNavigation_ = _false_.
| Role | resourceMaintenance | Information about the frequency of resource updates, and the scope of those updates | 0..1 | MD_MaintenanceInformation | S-100 restricts the multiplicity to 0..1and adds specific restrictions on the ISO 19115 structure and content. Seeclause **MD_MaintenanceInformation**in S-100 Part 17.

Format: PnYnMnDTnHnMnS (XML built-in type for ISO 8601 duration).
See S-100 clause 17-4.9 for encoding guidance.

|===

[[sec_14.2.2.1]]
===== S100_NavigationPurpose

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Code h| Remarks

| Enumeration | S100_NavigationPurpose | The purpose of the dataset               | - |
| Value       | port                   | For port and near shore operations       | 1 | -
| Value       | transit                | For coast and planning purposes          | 2 | -
| Value       | overview               | For ocean crossing and planning purposes | 3 | -

|===

[[sec_14.2.2.2]]
===== S100_DataCoverage

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Name h| Description h| Multiplicity h| Type h| Remarks

| S100_DataCoverage | A spatial extent where data is provided; and the display scale information for the provided data | - | -
| *The optional S-100 attributes _temporalExtent_ and _approximateGridResolution_ are not used in S-131.*
| boundingPolygon | A polygon which defines the actual data limit | 1 | EX_BoundingPolygon |
| optimumDisplayScale | The scale with which the data is optimally displayed | 0..1 | Integer
| Example: A scale of 1:25000 is encoded as 25000
| maximumDisplayScale | The maximum scale with which the data is displayed | 0..1 | Integer
| Must be one of the following values:

1000 +
2000 +
3000 +
4000 +
8000 +
12000 +
22000 +
45000 +
90000 +
180000 +
350000 +
700000 +
1500000 +
3500000 +
10000000

| minimumDisplayScale | The minimum scale with which the data is displayed | 0..1 | Integer
| Must be one of the following values:

2000 +
3000 +
4000 +
8000 +
12000 +
22000 +
45000 +
90000 +
180000 +
350000 +
700000 +
1500000 +
3500000 +
10000000
|===

[[sec_14.2.2.3]]
===== S100_Purpose

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Code h| Remarks

| Enumeration | S100_Purpose | The purpose of the dataset | - | *The value _delta_ is not used.*
| Value | newDataset | Brand new dataset | 1 | No data has previously been produced for this area
| Value | newEdition | New edition of the dataset or Catalogue | 2
| Includes new information which has not been previously distributed by updates
| Value | update | Dataset update | 3 | Changing some information in an existing dataset
| Value | reissue | Dataset that has been re-issued | 4
| Includes all the updates applied to the original dataset up to the date of the re-issue. A re-issue does not contain any new information additional to that previously issued by updates
| Value | cancellation | Dataset or Catalogue that has been cancelled | 5
| Indicates the dataset or Catalogue should no longer be used and can be deleted

|===

[[sec_14.2.2.4]]
===== S100_VerticalAndSoundingDatum

This is used by the meta-features for sounding and vertical datums.
This enumeration is not depicted in <<fig_14.2>> because it is not
used in the exchange catalogue.

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Code h| Remarks

| Enumeration | S100_VerticalAndSoundingDatum
| Allowable vertical and sounding datums | -
| *Values listed in S-100 Part 17 but not mentioned in this table
are not allowed*

| Value | meanLowWaterSprings               | | 1  | (MLWS)
| Value | meanLowerLowWaterSprings          | | 2  |
| Value | meanSeaLevel                      | | 3  | (MSL)
| Value | lowestLowWater                    | | 4  |
| Value | meanLowWater                      | | 5  | (MLW)
| Value | lowestLowWaterSprings             | | 6  |
| Value | approximateMeanLowWaterSprings    | | 7  |
| Value | indianSpringLowWater              | | 8  |
| Value | lowWaterSprings                   | | 9  |
| Value | approximateLowestAstronomicalTide | | 10 |
| Value | nearlyLowestLowWater              | | 11 |
| Value | meanLowerLowWater                 | | 12 | (MLLW)
| Value | lowWater                          | | 13 | (LW)
| Value | approximateMeanLowWater           | | 14 |
| Value | approximateMeanLowerLowWater      | | 15 |
| Value | meanHighWater                     | | 16 | (MHW)
| Value | meanHighWaterSprings              | | 17 | (MHWS)
| Value | highWater                         | | 18 | (HW)
| Value | approximateMeanSeaLevel           | | 19 |
| Value | highWaterSprings                  | | 20 |
| Value | meanHigherHighWater               | | 21 | (MHHW)
| Value | equinoctialSpringLowWater         | | 22 |
| Value | lowestAstronomicalTide            | | 23 | (LAT)
| Value | localDatum                        | | 24 |
| Value | internationalGreatLakesDatum1985  | | 25 |
| Value | meanWaterLevel                    | | 26 |
| Value | lowerLowWaterLargeTide            | | 27 |
| Value | higherHighWaterLargeTide          | | 28 |
| Value | nearlyHighestHighWater            | | 29 |
| Value | highestAstronomicalTide           | | 30 | (HAT)
| Value | balticSeaChartDatum2000           | | 44 |

| Value | internationalGreatLakesDatum2020
| The 2020 update to the International Great Lakes Datum, the official
reference system used to measure water level heights in the Great
Lakes, connecting channels, and the St. Lawrence River system
| 46
| Unlike the previous two IGLDs, this datum update will use a geoid-based
vertical datum that will be accessible using global navigation satellite
systems (GNSS) such as the Global Positioning System (GPS)

|===

NOTE: The numeric codes are the codes specified in the IHO GI Registry
for the equivalent listed values of the IHO Hydro domain attribute
_Vertical Datum_.

[[sec_14.2.2.5]]
===== S100_EncodingFormat

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Code h| Remarks

| Enumeration | S100_EncodingFormat | The encoding format | -
| *Values listed in S-100 Part 17 but not mentioned in this table are not allowed*
| Value | GML | The GML data format as defined in S-100 Part 10b | |
|===

[[sec_14.2.2.6]]
===== S100_ProductSpecification

[cols="a,a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult h| Type h| Remarks

| Class | S100_ProductSpecification
| The Product Specification contains the information needed to build
the specified product | - | -
| *The attribute _compliancyCategory_ is made mandatory.*

| Attribute | name
| The name of the Product Specification used to create the datasets
| 0..1 | CharacterString | Marine Harbour Infrastructure
| Attribute | version | The version number of the Product Specification | 0..1 | CharacterString | 1.0.0
| Attribute | date | The version date of the Product Specification | 0..1 | Date |

| Attribute | productIdentifier | Machine readable unique identifier of a product type | 1 | CharacterString(Restricted to Product ID values from the IHO Product Specification Register, in the IHO Geospatial Information (GI) Registry) | "S-131" (without quotes)
| Attribute | number | The number (registry index) used to lookup the product in the Product Specification Register | 1 | Integer | From the Product Specification Register in the IHO Geospatial Information (GI) Registry
| Attribute | compliancyCategory | The level of compliance of the Product Specification to S-100 | *1* | S100_CompliancyCategory
a| Needed for S-98 interoperability.

|===

[[sec_14.2.2.7]]
===== S100_CompiancyCategory

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Code h| Remarks

| Enumeration | S100_CompliancyCategory |                                                | - | *S-131 uses only _category4_*
| Value       | category4               | IHO S-100 and IMO harmonized display compliant |   |

|===

[[sec_14.2.2.8]]
===== S100_ProtectionScheme

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Code h| Remarks

| Enumeration | S100_ProtectionScheme | Data protection schemes | - | -
| Value       | S100p15               | IHO S-100 Part 15       | - | See S-100 Part 15

|===

[[sec_14.2.3]]
==== S100_SupportFileDiscoveryMetadata

[cols="a,a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult. h| Type h| Remarks

| Class | S100_SupportFileDiscoveryMetadata | Metadata about the individual support files in the Exchange Catalogue | - | - |
| Attribute | fileName | Name of the support file | 1 | URI | See S-100 Part 1, clause 1-4.6
| Attribute | revisionStatus | The purpose for which the support file has been issued | 1 | S100_SupportFileRevisionStatus | For example new, replacement, etc
| Attribute | editionNumber | The Edition number of the support file | 1 | Integer |
| Attribute | issueDate | Date on which the data was made available by the Data Producer | 0..1 | Date | Date on which the support file was made available by its producer.
| Attribute | supportFileSpecification | The specification used to create this file | 0..1 | S100_SupportFileSpecification | May be omitted for language packs.
| Attribute | dataType | The format of the support file | 1 | S100_SupportFileFormat |
| Attribute | otherDataTypeDescription | Support file format other than those listed | 0..1 | CharacterString |
| Attribute | comment | Optional comment | 0..1 | CharacterString |
| Attribute | compressionFlag | Indicates if the resource is compressed | 1 | Boolean
| _true_ indicates a compressed resource +
_false_ indicates an uncompressed resource
| Attribute | digitalSignatureReference | Specifies the algorithm used to compute digitalSignatureValue | 1 | S100_DigitalSignatureReference(see Part 15) |

| Attribute | digitalSignatureValue | Value derived from the digital signature | 1..++*++ | S100_DigitalSignatureValue(see Part 15) | The value resulting from application of digitalSignatureReferenceImplemented as the digital signature format specified in S-100 Part 15
| Attribute | defaultLocale | Default language and character set used in the support file | 0..1 | PT_Locale | In absence of defaultLocale the language is English in UTF-8A support file is expected to use only one as locale. Additional support files can be created for other locales.
| Attribute | supportedResource | Identifier of the resource supported by this support file | 0..++*++ | CharacterString | Conventions for identifiers are still to be developed in S-100.

In the interim, S-131 will use the name of the feature catalogue file or the name of the dataset, as appropriate.
| Attribute | resourcePurpose | The purpose of the supporting resource | 0..1 | S100_ResourcePurpose | Identifies how the supporting resource is used

|===

[[sec_14.2.3.1]]
===== S100_SupportFileFormat

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Code h| Remarks

| Enumeration | S100_SupportFileFormat | The format used for the support file | -
| *Values listed in S-100 Part 17 but not mentioned in this table
are not allowed*
| Value | ASCII | UTF-8 text excluding control codes | 1 | Text
| Value | HTML | Hypertext Markup Language | 3 |
| Value | XML | Extensible Markup Language | 4 |
| Value | TIFF | Tagged Image File Format | 7 |

|===

[[sec_14.2.3.2]]
===== S100_SupportFileRevisionStatus

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Code h| Remarks

| Enumeration | S100_SupportFileRevisionStatus
| The reason for inclusion of the support file in this exchange set | - | -
| Value | new | A file which is new | 1 | Signifies a new file
| Value | replacement | A file which replaces an existing file | 2 | Signifies a replacement for a file of the same name
| Value | deletion | Deletes an existing file | 3 | Signifies deletion of a file of that name

|===

[[sec_14.2.3.3]]
===== S100_SupportFileSpecification

[cols="a,a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult h| Type h| Remarks

| Class | S100_SupportFileSpecification
| The standard or specification to which a support file conforms | - | - | -
| Attribute | name | The name of the specification used to create the support file | 1 | CharacterString |
| Attribute | version | The version number of the specification | 0..1 | CharacterString |
| Attribute | date | The version date of the specification | 0..1 | Date |

|===

[[sec_14.2.3.4]]
===== S100_ResourcePurpose

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Code h| Remarks

| Enumeration | S100_ResourcePurpose      | Defines the purpose of the supporting resource  | - | -
| Value       | dataset                   | A dataset                                       | 1 |
| Value       | featureCatalogue          | A Feature Catalogue for an S-100 data product   | 2 |
| Value       | portrayalCatalogue        | A Portrayal Catalogue for an S-100 data product | 3 |
| Value       | interoperabilityCatalogue | An Interoperability Catalogue                   | 4 |
| Value       | supportFile               | A support file                                  | 5 |
| Value       | productVersion    | All datasets conforming to a specific version of an S-100 Product Specification | 6 |
| Value       | productFamily     | All datasets conforming to any active version of an S-100 Product Specification | 7 |
| Value       | software          | Application software                                                              | 8 |
| Value       | system            | Provides support or common information for a variety of applications and products | 9 |
| Value       | exchangeCatalogue | An Exchange Catalogue                      | 10  |
| Value       | ISO Metadata      | Dataset metadata in ISO format             | 11  |
| Value       | Language Pack     | A Language pack                            | 12  |
| Value       | GML Schema        | GML Application Schema                     | 13  |
| Value       | other             | A type of resource not otherwise described | 100 |

|===

[[sec_14.2.4]]
==== S100_CatalogueDiscoveryMetadata

This is an optional element that allows for the delivery of S-131
Feature and Portrayal Catalogues within the Exchange Set.

[cols="a,a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult h| Type h| Remarks

| Class | S100_CatalogueDiscoveryMetadata | Class for S-100 Catalogue metadata | - | - | -
| Attribute | fileName | The name for the Catalogue | 1 | URI | See S-100 Part1, clause 1-4.6
| Attribute | purpose | The purpose for which the Catalogue has been issued | 0..1 | S100_Purpose(codelist)
| The values must be one of the following: +
_2_ new edition +
_5_ cancellationDefault is new edition
| Attribute | editionNumber | The Edition number of the Catalogue | 1 | Integer | Initially set to 1 for a given productSpecification.numberIncreased by 1 for each subsequent newEditionUniquely identifies the version of the Catalogue

| Attribute | scope | Subject domain of the Catalogue | 1 | S100_CatalogueScope |
| Attribute | versionNumber | The version identifier of the Catalogue | 1 | CharacterString | Human readable version identifier
| Attribute | issueDate | The issue date of the Catalogue | 1 | Date |
| Attribute | productSpecification | The Product Specification used to create this file | 1 | S100_ProductSpecification |
| Attribute | digitalSignatureReference | Specifies the algorithm used to compute digitalSignatureValue | 1 | S100_DigitalSignatureReference(see S-100 Part 15) |

| Attribute | digitalSignatureValue | Value derived from the digital signature | 1..++*++ | S100_DigitalSignatureValue(see S-100 Part 15) | The value resulting from application of __digitalSignatureReference__Implemented as the digital signature format specified in Part 15
| Attribute | compressionFlag | Indicates if the resource is compressed | 1 | Boolean
| _true_ indicates a compressed resource +
_false_ indicates an uncompressed resource
| Attribute | defaultLocale | Default language and character set used in the Catalogue | 0..1 | PT_Locale | In absence of _defaultLocale_ the language is English in UTF-8
| Attribute | otherLocale | Other languages and character sets used in the Catalogue | 0..++*++ | PT_Locale |

|===

[[sec_14.2.4.1]]
===== S100_CatalogueScope

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Code h| Remarks

| Enumeration | S100_CatalogueScope       | The scope of the Catalogue       | - | -
| Value       | featureCatalogue          | S-100 Feature Catalogue          | 1 |
| Value       | portrayalCatalogue        | S-100 Portrayal Catalogue        | 2 |
| Value       | interoperabilityCatalogue | S-100 Interoperability Catalogue | 3 |
|===

[[sec_14.2.5]]
==== Miscellaneous metadata types

[[sec_14.2.5.1]]
===== MD_MaintenanceInformation

[cols="a,a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult h| Type h| Remarks

| Class | MD_MaintenanceInformation | Information about the scope and frequency of updating | - | -
a| S-100 restricts the ISO 19115-class to:

* prohibit maintenanceScope, maintenanceNote, and contact attributes;
* define restrictions on maintenanceAndUpdateFrequency, maintenanceDate,
and userDefinedMaintenanceFrequency attributes

| Attribute | maintenanceAndUpdateFrequency
| Frequency with which changes and additions are made to the resource
after the initial resource is completed | 0..1 | MD_MaintenanceFrequencyCode (codelist)
| Must be populated if userDefinedMaintenanceFrequency is not present,
otherwise optional. See Table MD_MaintenanceFrequencyCode in this
Part for values allowed in S-100 metadata
| Attribute | maintenanceDate | Date information associated with maintenance of the resource | 0..1 | CI_Date | Exactly one of maintenanceDate and userDefinedMaintenanceFrequency must be populatedAllowed value for dateType: nextUpdate
| Attribute | userDefinedMaintenanceFrequency | Maintenance period other than those defined | 0..1 | TM_PeriodDuration
| Exactly one of maintenanceDate and userDefinedMaintenanceFrequency
must be populatedOnly positive durations allowed

|===

[[sec_14.2.5.2]]
===== MD_MaintenanceFrequencyCode

S-100 uses a subset of the values allowed in <<ISO_19115_1>>.

[cols="a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Code h| Remarks

| Enumeration | MD_MaintenanceFrequencyCode
| Frequency with which modifications and deletions are made to the
data after it is first produced
| -
| S-100 is restricted to only the following values from the <<ISO_19115_1>>
codelist. The conditions for the use of a particular value are described
in its Remarks
| Value | asNeeded | Resource is updated as deemed necessary | 1
| Use only for datasets which normally use a regular interval for
update or supersession, but will have the next update issued at an
interval different from the usualAllowed if and only if
userDefinedMaintenanceFrequency is not populated
| Value | irregular | Resource is updated in intervals that are uneven in duration | 2
| Use only for datasets which do not use a regular schedule for update
or supersessionAllowed if and only if userDefinedMaintenanceFrequency
is not populated

|===

[[sec_14.2.5.3]]
===== PT_Locale

[cols="a,a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult h| Type h| Remarks

| Class | PT_Locale | description of a locale | - | - | From <<ISO_19115_1>>
| Value | language | designation of the locale language | 1 | LanguageCode | ISO 639-2 3-letter language codes.
| Value | country | designation of the specific country of the locale language
| 0..1 | CountryCode | ISO 3166-2 2-letter country codes
| Value | characterEncoding
| designation of the character set to be used to encode the textual
value of the locale
| 1 | MD_CharacterSetCode | UTF-8 is used in S-100

|===

The class PT_Locale is defined in <<ISO_19115_1>>. LanguageCode, CountryCode,
and MD_CharacterSetCode are ISO codelists which are defined in a resource
file in the S-100 5.0 schemas distribution.

[[sec_14.2.5.4]]
===== EX_GeographicBoundingBox

From <<ISO_19115_1>>.

[cols="a,a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult h| Type h| Remarks

| Class | EX_GeographicBoundingBox | geographic position of the dataset | - | -
| Defined in <<ISO_19115_1>>: geographic position of the resource

| Attribute | westBoundLongitude
| western-most coordinate of the limit of the dataset extent, expressed
in longitude in decimal degrees (positive east)
| 1 | Real | Arc degrees
| Attribute | eastBoundLongitude
| eastern-most coordinate of the limit of the dataset extent, expressed
in longitude in decimal degrees (positive east)
| 1 | Real | Arc degrees
| Attribute | southBoundLatitude
| southern-most coordinate of the limit of the dataset extent, expressed
in latitude in decimal degrees (positive north)
| 1 | Real | Arc degrees
| Attribute | northBoundLatitude
| northern-most, coordinate of the limit of the dataset extent expressed
in latitude in decimal degrees (positive north)
| 1 | Real | Arc degrees

|===

[[sec_14.2.5.5]]
===== EX_BoundingPolygon

From <<ISO_19115_1>>.

[cols="a,a,a,a,a,a",options="unnumbered"]
|===
h| Role Name h| Name h| Description h| Mult h| Type h| Remarks

| Class | EX_BoundingPolygon
| boundary enclosing the dataset, expressed as the closed set of (x,y)
coordinates of the polygon (last point replicates first point)
| - | -
| Defined in <<ISO_19115_1>>: enclosing geometric object which locates
the resource, expressed as a set of (x,y) coordinate(s)

| Attribute | polygon | sets of points defining the bounding polygon
| 1 | GM_Object | Must be a GM_Polygon(See S-100 Part 7, ISO 19107, ISO 19136)

|===

[[sec_14.2.6]]
==== Types for digital signatures

The types relating to digital signatures:

* S100_SE_CertificateContainer
* S100_SE_DigitalSignatureReference
* S100_SE_DigitalSignatureValue
* S100_SE_SignatureOnData
* S100_SE_SignatureOnSignature
* DataStatus

are defined in S-100 Part 15 and are used in S-131 without modification.

[[sec_14.3]]
=== Language

The exchange language must be English. Other languages may be used
as a supplementary option. National geographic names can be left in
their original national language using the complex attribute
*feature name*.

Character strings must be encoded using the character set defined
in <<ISO 10646-1>>, in Unicode Transformation Format-8 (UTF-8).
A BOM (byte order mark) must not be used.


== LIST OF ANNEXES

These Annexes are separate files and can be found either in the S-131
Product Specification distribution package or at the locations indicated.

Annex A:: Data Classification and Encoding Guide. Separate document.
IHO Geospatial Information Registry, link:++https://registry.iho.int++[]

Annex B:: Encoding Format. GML schema, Schematron rule files, and
schema documentation. S-100 schema server, link:++https://schemas.s100dev.net++[].

Annex C:: Feature catalogue. XML file. IHO Geospatial Information
Registry, link:++https://registry.iho.int++[]

Annex D:: Validation Checks. Separate document. IHO Geospatial Information
Registry, link:++https://registry.iho.int++[]

Annex E:: Portrayal Catalogue. Zip archive of portrayal catalogue.
IHO Geospatial Information Registry, link:++https://registry.iho.int++[]